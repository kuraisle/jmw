{"title":"MP carbon footprint on expenses","markdown":{"yaml":{"title":"MP carbon footprint on expenses","format":{"html":{"code-fold":true,"code-summary":"Show the code","echo":true}},"description":"An examination of how large the carbon footprint of UK MPs is, if you only look at the travel that they claim on their expenses.","date-format":"iso","date":"2023-11-27"},"headingText":"An example - Hey big spender!","containsRefs":false,"markdown":"\n\n*This is a work in progress. I need to finish converting trips to carbon consumption!*\n\nHere we're going to look at the carbon footprint of the travel UK Members of Parliament (MPs) have put on their expenses. First, we will get the data for MPs' expenses from [IPSA](https://www.theipsa.org.uk/). I'll be looking at the data from the year 2022-2023, as this is the last complete year of data as of 21/11/2023.\n\nHere are the top 30 spenders, by the amount paid for their travel.\n\n```{ojs}\ndata = await FileAttachment(\"data/individualBusinessCosts_22_23.csv\").csv({typed:true});\ntravel_tags = ['Dependant Travel', 'MP Travel', 'Staff Travel'];\ntravel_data = data\n  .filter((expense) => {\n    return travel_tags.includes(expense.Category)\n  })\n  .map((expense) => {\n      return {Name: expense.Name, \"Amount Claimed\": expense['Amount Claimed'], 'Cost Type': expense['Cost Type'] }\n      });\ntotal_travel = travel_data.reduce((acc, current) => {\n  const existing = acc.find(item => item.Name === current.Name);\n   if (existing) {\n     existing.TotalClaimed += current[\"Amount Claimed\"];\n   } else {\n     acc.push({ Name: current.Name, TotalClaimed: current[\"Amount Claimed\"] });\n   }\n   return acc;\n  }, [])\n  .sort(\n    (a, b) => b.TotalClaimed-a.TotalClaimed\n  );\ntravel_biggest_spenders = total_travel.slice(0, 30).map((spender) => spender.Name);\nbig_spenders_by_type = travel_data\n  .filter((expense) => travel_biggest_spenders.includes(expense.Name))\n  .reduce(\n    (acc, current) => {\n      const existing = acc.find(item => item.Name === current.Name && item['Cost Type'] === current['Cost Type']);\n      if (existing) {\n        existing['Amount Claimed'] += current['Amount Claimed']\n      } else {\n        acc.push({ Name: current.Name, 'Amount Claimed': current['Amount Claimed'], 'Cost Type': current['Cost Type']})\n      }\n    return acc;\n    }, []\n  );\n```\n```{ojs}\nPlot.plot({\n  marginBottom:120,\n  color: {scheme: \"Spectral\", legend: true, width: 800, label: \"Cost Type\"},\n  x: { tickRotate:-60},\n  y: { grid: true },\n  marks: [ Plot.barY(big_spenders_by_type, {x:\"Name\", y: \"Amount Claimed\", fill: \"Cost Type\", sort: {color: \"fill\", x: \"-y\"}})]\n})\n```\nPhew, Steven Bonnar spent nearly £60,000 on travel. A lot of this was spent on air travel. Steven Bonnar is the Scottish National Party (SNP) MP for Coatbridge, Chryston and Bellshill.\n\n```{ojs}\nbonnar_flights = data\n                     .filter((expense) => expense.Name === 'Steven Bonnar' && expense['Cost Type'] == 'Air travel')\n                     .map((expense) => ({ 'From': expense.From, 'To': expense.To }))\n                     .reduce((acc, current) => {\n                              const existing = acc.find(item => item.From === current.From && item.To === current.To);\n                              if (existing) {\n                                existing.Count += 1\n                              } else {\n                                acc.push({ 'From': current.From, 'To': current.To, 'Count' : 1})\n                              }\n                              return acc;\n                            }, [])\n                      .sort((a,b) =>\n                        {\n                          if (a.From < b.From) { return -1}\n                          if (a.From > b.From) { return 1 }\n                          return 0\n                        }\n                      );\n\nInputs.table(bonnar_flights)\n```\nYou can see that all of this is him flying from Glasgow, where his constituency is, to London, for Parliament.\nA Glasgow to London flight takes about an hour and a half. The train takes four and a half hours.\n\n```{ojs}\nsb_flight_stats = [\n  {Journey: 'GLA-LCY', Vehicle: 'Aeroplane', 'Time (hours)': 1.5, 'Estimated CO2 (kg)': 101.2, 'Distance to\\nparliament (km)': 9.5},\n  {Journey: 'GLA-LHR', Vehicle: 'Aeroplane', 'Time (hours)': 1.4, 'Estimated CO2 (kg)': 68.5, 'Distance to\\nparliament (km)': 16.7},\n  {Journey: 'GLA-LGW', Vehicle: 'Aeroplane', 'Time (hours)': 1.6, 'Estimated CO2 (kg)': 81.4, 'Distance to\\nparliament (km)': 27.1},\n  {Journey: 'GLA-STN', Vehicle: 'Aeroplane', 'Time (hours)': 1.3, 'Estimated CO2 (kg)': 75.6, 'Distance to\\nparliament (km)': 41.2},\n  {Journey: 'Glasgow-Euston', Vehicle: 'Train', 'Time (hours)': 4.5, 'Estimated CO2 (kg)': 24.57, 'Distance to\\nparliament (km)': 2.4}\n];\nInputs.table(sb_flight_stats)\n```\nIs this all fair enough then? The honourable member would save up to three hours and ten minutes per trip going by air, right? Getting through the airport takes at least an hour, though, and London Euston is a lot closer to Parliament than, for example, Stansted, shrinking the time advantage.\n\nLet's have an estimate of the carbon emissions of these trips then.\n```{ojs}\nsb_flight_counts = [72, 41, 1, 2, 0]\nsb_flight_stats_with_counts = sb_flight_stats.map((journey, index) => \n                                                      ({'Journey': journey.Journey,\n                                                        'Count': sb_flight_counts[index],\n                                                        'Total CO2 (kg)': sb_flight_counts[index]*journey['Estimated CO2 (kg)']\n                                                      }));\nInputs.table(sb_flight_stats_with_counts)\n```\n\n## The point of the exercise\nAll this isn't just to bash poor Steven Bonnar, against whom I have no particular grudge. It's always going to be tricky commuting from Glasgow to London. I do think, however, we should look at how much damage to the environment the UK taxpayer is paying for. Here, I'll be estimating the emissions for each taxpayer-funded trip, then breaking down the dataset to see if anyone could be doing better.\n\n### Estimating emissions\nHow do you estimate emissions from travel then? For some modes of transport, it's fairly straightforward - there's a particular value per kilometre, and we assume everything else evens out.\n\nWhat kinds of expenses are people claiming then?\n```{ojs}\ntravel_types = new Set(travel_data.map((expense) => expense['Cost Type']))\n```\n```{ojs}\nviewof test = {\n  const type_elements = [...travel_types].map((type) => html`<li>${type}</li>`)\n  return html`<ul>${type_elements}</ul>`\n}\n```\n\nSome of these we will discard. We aren't looking at the emissions of staying in a hotel, because it would be too hard to estimate, and not meaningful to look at here. Other things like railcards and congestion charges don't have a meaningful emissions figure.\n\nI am curious as to what someone is claiming as the mileage on their bicycle, though. New tyres? Protein bars?\n<!---\n#### Road emissions\n\n#### Train emissions\n\n#### Air Travel emissions\n--->\n","srcMarkdownNoYaml":"\n\n*This is a work in progress. I need to finish converting trips to carbon consumption!*\n\n## An example - Hey big spender!\nHere we're going to look at the carbon footprint of the travel UK Members of Parliament (MPs) have put on their expenses. First, we will get the data for MPs' expenses from [IPSA](https://www.theipsa.org.uk/). I'll be looking at the data from the year 2022-2023, as this is the last complete year of data as of 21/11/2023.\n\nHere are the top 30 spenders, by the amount paid for their travel.\n\n```{ojs}\ndata = await FileAttachment(\"data/individualBusinessCosts_22_23.csv\").csv({typed:true});\ntravel_tags = ['Dependant Travel', 'MP Travel', 'Staff Travel'];\ntravel_data = data\n  .filter((expense) => {\n    return travel_tags.includes(expense.Category)\n  })\n  .map((expense) => {\n      return {Name: expense.Name, \"Amount Claimed\": expense['Amount Claimed'], 'Cost Type': expense['Cost Type'] }\n      });\ntotal_travel = travel_data.reduce((acc, current) => {\n  const existing = acc.find(item => item.Name === current.Name);\n   if (existing) {\n     existing.TotalClaimed += current[\"Amount Claimed\"];\n   } else {\n     acc.push({ Name: current.Name, TotalClaimed: current[\"Amount Claimed\"] });\n   }\n   return acc;\n  }, [])\n  .sort(\n    (a, b) => b.TotalClaimed-a.TotalClaimed\n  );\ntravel_biggest_spenders = total_travel.slice(0, 30).map((spender) => spender.Name);\nbig_spenders_by_type = travel_data\n  .filter((expense) => travel_biggest_spenders.includes(expense.Name))\n  .reduce(\n    (acc, current) => {\n      const existing = acc.find(item => item.Name === current.Name && item['Cost Type'] === current['Cost Type']);\n      if (existing) {\n        existing['Amount Claimed'] += current['Amount Claimed']\n      } else {\n        acc.push({ Name: current.Name, 'Amount Claimed': current['Amount Claimed'], 'Cost Type': current['Cost Type']})\n      }\n    return acc;\n    }, []\n  );\n```\n```{ojs}\nPlot.plot({\n  marginBottom:120,\n  color: {scheme: \"Spectral\", legend: true, width: 800, label: \"Cost Type\"},\n  x: { tickRotate:-60},\n  y: { grid: true },\n  marks: [ Plot.barY(big_spenders_by_type, {x:\"Name\", y: \"Amount Claimed\", fill: \"Cost Type\", sort: {color: \"fill\", x: \"-y\"}})]\n})\n```\nPhew, Steven Bonnar spent nearly £60,000 on travel. A lot of this was spent on air travel. Steven Bonnar is the Scottish National Party (SNP) MP for Coatbridge, Chryston and Bellshill.\n\n```{ojs}\nbonnar_flights = data\n                     .filter((expense) => expense.Name === 'Steven Bonnar' && expense['Cost Type'] == 'Air travel')\n                     .map((expense) => ({ 'From': expense.From, 'To': expense.To }))\n                     .reduce((acc, current) => {\n                              const existing = acc.find(item => item.From === current.From && item.To === current.To);\n                              if (existing) {\n                                existing.Count += 1\n                              } else {\n                                acc.push({ 'From': current.From, 'To': current.To, 'Count' : 1})\n                              }\n                              return acc;\n                            }, [])\n                      .sort((a,b) =>\n                        {\n                          if (a.From < b.From) { return -1}\n                          if (a.From > b.From) { return 1 }\n                          return 0\n                        }\n                      );\n\nInputs.table(bonnar_flights)\n```\nYou can see that all of this is him flying from Glasgow, where his constituency is, to London, for Parliament.\nA Glasgow to London flight takes about an hour and a half. The train takes four and a half hours.\n\n```{ojs}\nsb_flight_stats = [\n  {Journey: 'GLA-LCY', Vehicle: 'Aeroplane', 'Time (hours)': 1.5, 'Estimated CO2 (kg)': 101.2, 'Distance to\\nparliament (km)': 9.5},\n  {Journey: 'GLA-LHR', Vehicle: 'Aeroplane', 'Time (hours)': 1.4, 'Estimated CO2 (kg)': 68.5, 'Distance to\\nparliament (km)': 16.7},\n  {Journey: 'GLA-LGW', Vehicle: 'Aeroplane', 'Time (hours)': 1.6, 'Estimated CO2 (kg)': 81.4, 'Distance to\\nparliament (km)': 27.1},\n  {Journey: 'GLA-STN', Vehicle: 'Aeroplane', 'Time (hours)': 1.3, 'Estimated CO2 (kg)': 75.6, 'Distance to\\nparliament (km)': 41.2},\n  {Journey: 'Glasgow-Euston', Vehicle: 'Train', 'Time (hours)': 4.5, 'Estimated CO2 (kg)': 24.57, 'Distance to\\nparliament (km)': 2.4}\n];\nInputs.table(sb_flight_stats)\n```\nIs this all fair enough then? The honourable member would save up to three hours and ten minutes per trip going by air, right? Getting through the airport takes at least an hour, though, and London Euston is a lot closer to Parliament than, for example, Stansted, shrinking the time advantage.\n\nLet's have an estimate of the carbon emissions of these trips then.\n```{ojs}\nsb_flight_counts = [72, 41, 1, 2, 0]\nsb_flight_stats_with_counts = sb_flight_stats.map((journey, index) => \n                                                      ({'Journey': journey.Journey,\n                                                        'Count': sb_flight_counts[index],\n                                                        'Total CO2 (kg)': sb_flight_counts[index]*journey['Estimated CO2 (kg)']\n                                                      }));\nInputs.table(sb_flight_stats_with_counts)\n```\n\n## The point of the exercise\nAll this isn't just to bash poor Steven Bonnar, against whom I have no particular grudge. It's always going to be tricky commuting from Glasgow to London. I do think, however, we should look at how much damage to the environment the UK taxpayer is paying for. Here, I'll be estimating the emissions for each taxpayer-funded trip, then breaking down the dataset to see if anyone could be doing better.\n\n### Estimating emissions\nHow do you estimate emissions from travel then? For some modes of transport, it's fairly straightforward - there's a particular value per kilometre, and we assume everything else evens out.\n\nWhat kinds of expenses are people claiming then?\n```{ojs}\ntravel_types = new Set(travel_data.map((expense) => expense['Cost Type']))\n```\n```{ojs}\nviewof test = {\n  const type_elements = [...travel_types].map((type) => html`<li>${type}</li>`)\n  return html`<ul>${type_elements}</ul>`\n}\n```\n\nSome of these we will discard. We aren't looking at the emissions of staying in a hotel, because it would be too hard to estimate, and not meaningful to look at here. Other things like railcards and congestion charges don't have a meaningful emissions figure.\n\nI am curious as to what someone is claiming as the mileage on their bicycle, though. New tyres? Protein bars?\n<!---\n#### Road emissions\n\n#### Train emissions\n\n#### Air Travel emissions\n--->\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"mp_expense_carbon.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.549","theme":"flatly","title":"MP carbon footprint on expenses","description":"An examination of how large the carbon footprint of UK MPs is, if you only look at the travel that they claim on their expenses.","date-format":"iso","date":"2023-11-27","code-summary":"Show the code"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}