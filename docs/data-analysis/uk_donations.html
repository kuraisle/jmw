<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-10-14">
<meta name="description" content="Exploring how donations to the UK’s political parties compare">

<title>James Mitchell-White - UK political donations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">James Mitchell-White</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../papers/index.html"> 
<span class="menu-text">Papers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../data-analysis/index.html"> 
<span class="menu-text">Data Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-data" id="toc-the-data" class="nav-link active" data-scroll-target="#the-data">The data</a></li>
  <li><a href="#plots" id="toc-plots" class="nav-link" data-scroll-target="#plots">Plots</a>
  <ul class="collapse">
  <li><a href="#totals-over-time" id="toc-totals-over-time" class="nav-link" data-scroll-target="#totals-over-time">Totals over time</a></li>
  </ul></li>
  <li><a href="#median-donation-value" id="toc-median-donation-value" class="nav-link" data-scroll-target="#median-donation-value">Median donation value</a></li>
  <li><a href="#the-donors" id="toc-the-donors" class="nav-link" data-scroll-target="#the-donors">The Donors</a></li>
  <li><a href="#bonus" id="toc-bonus" class="nav-link" data-scroll-target="#bonus">Bonus</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">UK political donations</h1>
  <div class="quarto-categories">
    <div class="quarto-category">data analysis</div>
  </div>
  </div>

<div>
  <div class="description">
    Exploring how donations to the UK’s political parties compare
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2024-10-14</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The data</h2>
<p>I’m interested to know more about the donations made to the UK’s political parties. More specifically, I’m curious to know how the donations are spread among donors. The information is readily available from the electoral comission. I’ve downloaded everything from the start of 2001 to the end of 2023. I omitted donations from the parties themselves, which I think is just them moving money from the central office into constituencies.</p>
<div id="10af3a35" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> vegafusion</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>alt.data_transformers.enable(<span class="st">"vegafusion"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s get an overview of the data.</p>
<div id="0693ed5c" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>donations <span class="op">=</span> pl.read_csv(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"./data/uk_pol_donations.csv"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>).select(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"*"</span>).exclude(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ECRef"</span>, <span class="st">"Postcode"</span>, <span class="st">"CompanyRegistrationNumber"</span>, <span class="st">"PurposeOfVisit"</span>, <span class="st">"DonationAction"</span>, <span class="st">"ReceivedDate"</span>, <span class="st">"ReportedDate"</span>, <span class="st">"ReportingPeriodName"</span>, <span class="st">"AccountingUnitId"</span>, <span class="st">"RegulatedEntityType"</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>donations.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (9, 20)</small>
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">statistic</th>
<th data-quarto-table-cell-role="th">RegulatedEntityName</th>
<th data-quarto-table-cell-role="th">Value</th>
<th data-quarto-table-cell-role="th">AcceptedDate</th>
<th data-quarto-table-cell-role="th">AccountingUnitName</th>
<th data-quarto-table-cell-role="th">DonorName</th>
<th data-quarto-table-cell-role="th">AccountingUnitsAsCentralParty</th>
<th data-quarto-table-cell-role="th">IsSponsorship</th>
<th data-quarto-table-cell-role="th">DonorStatus</th>
<th data-quarto-table-cell-role="th">RegulatedDoneeType</th>
<th data-quarto-table-cell-role="th">DonationType</th>
<th data-quarto-table-cell-role="th">NatureOfDonation</th>
<th data-quarto-table-cell-role="th">IsReportedPrePoll</th>
<th data-quarto-table-cell-role="th">IsBequest</th>
<th data-quarto-table-cell-role="th">IsAggregation</th>
<th data-quarto-table-cell-role="th">RegulatedEntityId</th>
<th data-quarto-table-cell-role="th">DonorId</th>
<th data-quarto-table-cell-role="th">CampaigningName</th>
<th data-quarto-table-cell-role="th">RegisterName</th>
<th data-quarto-table-cell-role="th">IsIrishSource</th>
</tr>
<tr class="odd">
<th>str</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>f64</th>
<th>f64</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>str</th>
<th>str</th>
<th>f64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"count"</td>
<td>"70669"</td>
<td>"70669"</td>
<td>"70669"</td>
<td>"70669"</td>
<td>"70669"</td>
<td>70669.0</td>
<td>70669.0</td>
<td>"70669"</td>
<td>"0"</td>
<td>"70669"</td>
<td>"11386"</td>
<td>"42917"</td>
<td>70669.0</td>
<td>70669.0</td>
<td>70669.0</td>
<td>70669.0</td>
<td>"0"</td>
<td>"70669"</td>
<td>70116.0</td>
</tr>
<tr class="even">
<td>"null_count"</td>
<td>"0"</td>
<td>"0"</td>
<td>"0"</td>
<td>"0"</td>
<td>"0"</td>
<td>0.0</td>
<td>0.0</td>
<td>"0"</td>
<td>"70669"</td>
<td>"0"</td>
<td>"59283"</td>
<td>"27752"</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>"70669"</td>
<td>"0"</td>
<td>553.0</td>
</tr>
<tr class="odd">
<td>"mean"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>0.049527</td>
<td>0.010146</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>0.012735</td>
<td>0.246898</td>
<td>116.895555</td>
<td>41802.893136</td>
<td>null</td>
<td>null</td>
<td>0.000242</td>
</tr>
<tr class="even">
<td>"std"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>635.27884</td>
<td>28796.123603</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"min"</td>
<td>"Advance Together [De-registere…</td>
<td>"£0.00"</td>
<td>"01/01/2002"</td>
<td>"ALDC"</td>
<td>" A D Gatling"</td>
<td>0.0</td>
<td>0.0</td>
<td>"Company"</td>
<td>null</td>
<td>"Cash"</td>
<td>"Administration services"</td>
<td>"False"</td>
<td>0.0</td>
<td>0.0</td>
<td>17.0</td>
<td>1.0</td>
<td>null</td>
<td>"Great Britain"</td>
<td>0.0</td>
</tr>
<tr class="even">
<td>"25%"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>52.0</td>
<td>18697.0</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"50%"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>53.0</td>
<td>34448.0</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"75%"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>90.0</td>
<td>67845.0</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"max"</td>
<td>"women4theworld [De-registered …</td>
<td>"£999.92"</td>
<td>"31/12/2023"</td>
<td>"kingston upon Hull"</td>
<td>"the capital dairy Company ltd"</td>
<td>1.0</td>
<td>1.0</td>
<td>"Unincorporated Association"</td>
<td>null</td>
<td>"Visit"</td>
<td>"Travel"</td>
<td>"False"</td>
<td>1.0</td>
<td>1.0</td>
<td>12922.0</td>
<td>102542.0</td>
<td>null</td>
<td>"Northern Ireland"</td>
<td>1.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>There’s some cleaning required here. The dates and donation value are strings, but we want to convert them to dates and numbers.</p>
<div id="2bf0afcb" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>donations <span class="op">=</span> donations.with_columns(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  (pl.col(<span class="st">"Value"</span>).<span class="bu">str</span>.replace_all(<span class="vs">r",|£"</span>, <span class="st">""</span>).cast(pl.Float32)),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  (pl.col(<span class="st">"AcceptedDate"</span>).<span class="bu">str</span>.to_date(<span class="st">"</span><span class="sc">%d</span><span class="st">/%m/%Y"</span>)),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>donations.select(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"Value"</span>, <span class="st">"AcceptedDate"</span>]</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>).describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (9, 3)</small>
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">statistic</th>
<th data-quarto-table-cell-role="th">Value</th>
<th data-quarto-table-cell-role="th">AcceptedDate</th>
</tr>
<tr class="odd">
<th>str</th>
<th>f64</th>
<th>str</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"count"</td>
<td>70669.0</td>
<td>"70669"</td>
</tr>
<tr class="even">
<td>"null_count"</td>
<td>0.0</td>
<td>"0"</td>
</tr>
<tr class="odd">
<td>"mean"</td>
<td>17936.255859</td>
<td>"2013-01-10 17:57:47.042000"</td>
</tr>
<tr class="even">
<td>"std"</td>
<td>101902.71875</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"min"</td>
<td>0.0</td>
<td>"2001-02-16"</td>
</tr>
<tr class="even">
<td>"25%"</td>
<td>1500.0</td>
<td>"2007-11-09"</td>
</tr>
<tr class="odd">
<td>"50%"</td>
<td>3000.0</td>
<td>"2013-05-25"</td>
</tr>
<tr class="even">
<td>"75%"</td>
<td>9545.0</td>
<td>"2018-06-01"</td>
</tr>
<tr class="odd">
<td>"max"</td>
<td>1e7</td>
<td>"2023-12-31"</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="plots" class="level2">
<h2 class="anchored" data-anchor-id="plots">Plots</h2>
<section id="totals-over-time" class="level3">
<h3 class="anchored" data-anchor-id="totals-over-time">Totals over time</h3>
<p>I’m going to mostly work with the values of donations aggregated by year. A year is long enough to get a good number of donations to look at, but granular enough that we can see some patterns, like the big spikes for the 2010, 2019, and 2024 elections.</p>
<div id="699ecd76" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>donations.select(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"Value"</span>, <span class="st">"AcceptedDate"</span>]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>).sort(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AcceptedDate"</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>).group_by_dynamic(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AcceptedDate"</span>, every<span class="op">=</span><span class="st">"1y"</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>).agg(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"Value"</span>).<span class="bu">sum</span>().alias(<span class="st">"Total Donations (£)"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>).plot.bar(</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">"AcceptedDate"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="st">"Total Donations (£)"</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="st">"container"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">

<style>
  #altair-viz-78b2dcd92c5b49f9a08b4ed5248a20d2.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-78b2dcd92c5b49f9a08b4ed5248a20d2.vega-embed details,
  #altair-viz-78b2dcd92c5b49f9a08b4ed5248a20d2.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-78b2dcd92c5b49f9a08b4ed5248a20d2"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-78b2dcd92c5b49f9a08b4ed5248a20d2") {
      outputDiv = document.getElementById("altair-viz-78b2dcd92c5b49f9a08b4ed5248a20d2");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "param_5_store"}, {"name": "source_0", "values": [{"AcceptedDate": "2001-01-01T00:00:00.000", "Total Donations (\u00a3)": 31985008.0, "Total Donations (\u00a3)_end": 31985008.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2002-01-01T00:00:00.000", "Total Donations (\u00a3)": 21759238.0, "Total Donations (\u00a3)_end": 21759238.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2003-01-01T00:00:00.000", "Total Donations (\u00a3)": 28522368.0, "Total Donations (\u00a3)_end": 28522368.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2004-01-01T00:00:00.000", "Total Donations (\u00a3)": 37767452.0, "Total Donations (\u00a3)_end": 37767452.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2005-01-01T00:00:00.000", "Total Donations (\u00a3)": 50962248.0, "Total Donations (\u00a3)_end": 50962248.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2006-01-01T00:00:00.000", "Total Donations (\u00a3)": 44765180.0, "Total Donations (\u00a3)_end": 44765180.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2007-01-01T00:00:00.000", "Total Donations (\u00a3)": 56619908.0, "Total Donations (\u00a3)_end": 56619908.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2008-01-01T00:00:00.000", "Total Donations (\u00a3)": 51359660.0, "Total Donations (\u00a3)_end": 51359660.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2009-01-01T00:00:00.000", "Total Donations (\u00a3)": 59819060.0, "Total Donations (\u00a3)_end": 59819060.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2010-01-01T00:00:00.000", "Total Donations (\u00a3)": 69475992.0, "Total Donations (\u00a3)_end": 69475992.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2011-01-01T00:00:00.000", "Total Donations (\u00a3)": 43822688.0, "Total Donations (\u00a3)_end": 43822688.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2012-01-01T00:00:00.000", "Total Donations (\u00a3)": 39956264.0, "Total Donations (\u00a3)_end": 39956264.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2013-01-01T00:00:00.000", "Total Donations (\u00a3)": 45287044.0, "Total Donations (\u00a3)_end": 45287044.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2014-01-01T00:00:00.000", "Total Donations (\u00a3)": 74931952.0, "Total Donations (\u00a3)_end": 74931952.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2015-01-01T00:00:00.000", "Total Donations (\u00a3)": 77475160.0, "Total Donations (\u00a3)_end": 77475160.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2016-01-01T00:00:00.000", "Total Donations (\u00a3)": 52759880.0, "Total Donations (\u00a3)_end": 52759880.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2017-01-01T00:00:00.000", "Total Donations (\u00a3)": 74390368.0, "Total Donations (\u00a3)_end": 74390368.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2018-01-01T00:00:00.000", "Total Donations (\u00a3)": 48589964.0, "Total Donations (\u00a3)_end": 48589964.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2019-01-01T00:00:00.000", "Total Donations (\u00a3)": 117412408.0, "Total Donations (\u00a3)_end": 117412408.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2020-01-01T00:00:00.000", "Total Donations (\u00a3)": 42152716.0, "Total Donations (\u00a3)_end": 42152716.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2021-01-01T00:00:00.000", "Total Donations (\u00a3)": 51305384.0, "Total Donations (\u00a3)_end": 51305384.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2022-01-01T00:00:00.000", "Total Donations (\u00a3)": 52185388.0, "Total Donations (\u00a3)_end": 52185388.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2023-01-01T00:00:00.000", "Total Donations (\u00a3)": 94231872.0, "Total Donations (\u00a3)_end": 94231872.0, "Total Donations (\u00a3)_start": 0.0}], "transform": [{"type": "formula", "expr": "toDate(datum['AcceptedDate'])", "as": "AcceptedDate"}]}], "signals": [{"name": "width", "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 300", "on": [{"events": "window:resize", "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 300"}]}, {"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_5", "update": "vlSelectionResolve(\"param_5_store\", \"union\")"}, {"name": "param_5_AcceptedDate", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_5_translate_delta"}, "update": "panLinear(param_5_translate_anchor.extent_x, -param_5_translate_delta.x / width)"}, {"events": {"signal": "param_5_zoom_delta"}, "update": "zoomLinear(domain(\"x\"), param_5_zoom_anchor.x, param_5_zoom_delta)"}]}, {"name": "param_5_Total_Donations____", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_5_translate_delta"}, "update": "panLinear(param_5_translate_anchor.extent_y, param_5_translate_delta.y / height)"}, {"events": {"signal": "param_5_zoom_delta"}, "update": "zoomLinear(domain(\"y\"), param_5_zoom_anchor.y, param_5_zoom_delta)"}]}, {"name": "param_5_tuple", "on": [{"events": [{"signal": "param_5_AcceptedDate || param_5_Total_Donations____"}], "update": "param_5_AcceptedDate && param_5_Total_Donations____ ? {unit: \"\", fields: param_5_tuple_fields, values: [param_5_AcceptedDate,param_5_Total_Donations____]} : null"}]}, {"name": "param_5_tuple_fields", "value": [{"field": "AcceptedDate", "channel": "x", "type": "R"}, {"field": "Total Donations (\u00a3)", "channel": "y", "type": "R"}]}, {"name": "param_5_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: domain(\"x\"), extent_y: domain(\"y\")}"}]}, {"name": "param_5_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "consume": true, "type": "pointermove"}], "update": "{x: param_5_translate_anchor.x - x(unit), y: param_5_translate_anchor.y - y(unit)}"}]}, {"name": "param_5_zoom_anchor", "on": [{"events": [{"source": "scope", "type": "wheel", "consume": true}], "update": "{x: invert(\"x\", x(unit)), y: invert(\"y\", y(unit))}"}]}, {"name": "param_5_zoom_delta", "on": [{"events": [{"source": "scope", "consume": true, "type": "wheel"}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_5_modify", "on": [{"events": {"signal": "param_5_tuple"}, "update": "modify(\"param_5_store\", param_5_tuple, true)"}]}], "marks": [{"type": "rect", "name": "marks", "from": {"data": "source_0"}, "encode": {"update": {"xc": {"field": "AcceptedDate", "scale": "x"}, "y": {"field": "Total Donations (\u00a3)_end", "scale": "y"}, "y2": {"field": "Total Donations (\u00a3)_start", "scale": "y"}, "width": {"value": 5}, "tooltip": {"signal": "{\"AcceptedDate\": timeFormat(datum[\"AcceptedDate\"], '%b %d, %Y'), \"Total Donations (\u00a3)\": format(datum[\"Total Donations (\u00a3)\"], \"\")}"}, "fill": {"value": "#4c78a8"}}}, "clip": true, "style": ["bar"], "interactive": true}], "scales": [{"name": "x", "type": "time", "domain": {"data": "source_0", "field": "AcceptedDate"}, "range": [0, {"signal": "width"}], "domainRaw": {"signal": "param_5[\"AcceptedDate\"]"}, "padding": 5}, {"name": "y", "type": "linear", "domain": {"data": "source_0", "fields": ["Total Donations (\u00a3)_start", "Total Donations (\u00a3)_end"]}, "range": [{"signal": "height"}, 0], "zero": true, "domainRaw": {"signal": "param_5[\"Total Donations (\u00a3)\"]"}, "nice": true}], "axes": [{"scale": "x", "zindex": 0, "gridScale": "y", "tickCount": {"signal": "ceil(width/40)"}, "domain": false, "grid": true, "labels": false, "orient": "bottom", "minExtent": 0, "aria": false, "maxExtent": 0, "ticks": false}, {"scale": "y", "labels": false, "grid": true, "tickCount": {"signal": "ceil(height/40)"}, "domain": false, "aria": false, "maxExtent": 0, "zindex": 0, "orient": "left", "gridScale": "x", "minExtent": 0, "ticks": false}, {"scale": "x", "labelFlush": true, "tickCount": {"signal": "ceil(width/40)"}, "zindex": 0, "labelOverlap": true, "orient": "bottom", "grid": false, "title": "AcceptedDate"}, {"scale": "y", "labelOverlap": true, "tickCount": {"signal": "ceil(height/40)"}, "orient": "left", "zindex": 0, "title": "Total Donations (\u00a3)", "grid": false}], "padding": 5, "height": 300, "style": "cell", "autosize": {"type": "fit-x", "contains": "padding"}, "background": "white"}, {"mode": "vega"});
</script>
</div>
</div>
<p>I’m going to concentrate on the three main parties: the Conservatives, Labour, and Liberal Democrats. I’ve chucked in Reform UK, simply because the ~£11 million they were donated in 2019 put them, briefly, in the same league, financially.</p>
<div id="262a0dc0" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>main_parties <span class="op">=</span> [<span class="st">"Labour Party"</span>, <span class="st">"Conservative and Unionist Party"</span>, <span class="st">"Liberal Democrats"</span>, <span class="st">"Reform UK"</span>]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>party_colours <span class="op">=</span> [<span class="st">"#d50000"</span>, <span class="st">"#0087dc"</span>, <span class="st">"#FDBB30"</span>, <span class="st">"cyan"</span>]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>donations.select(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"Value"</span>, <span class="st">"RegulatedEntityName"</span>, <span class="st">"AcceptedDate"</span>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"RegulatedEntityName"</span>).is_in(main_parties)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>).sort(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AcceptedDate"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>).group_by_dynamic(</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AcceptedDate"</span>, every<span class="op">=</span><span class="st">"1y"</span>, group_by<span class="op">=</span><span class="st">"RegulatedEntityName"</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>).agg(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"Value"</span>).<span class="bu">sum</span>().alias(<span class="st">"Total Donations (£)"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>).plot.bar(</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">"AcceptedDate"</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="st">"Total Donations (£)"</span>,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span>alt.Color(<span class="st">"RegulatedEntityName"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>main_parties, <span class="bu">range</span><span class="op">=</span>party_colours)),</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="st">"container"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="24">

<style>
  #altair-viz-1a2fae18efa940b5ba09b5cd7b81bd94.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-1a2fae18efa940b5ba09b5cd7b81bd94.vega-embed details,
  #altair-viz-1a2fae18efa940b5ba09b5cd7b81bd94.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-1a2fae18efa940b5ba09b5cd7b81bd94"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-1a2fae18efa940b5ba09b5cd7b81bd94") {
      outputDiv = document.getElementById("altair-viz-1a2fae18efa940b5ba09b5cd7b81bd94");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "param_6_store"}, {"name": "source_0", "values": [{"AcceptedDate": "2001-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 12054598.0, "Total Donations (\u00a3)_end": 13591491.75, "Total Donations (\u00a3)_start": 1536893.75}, {"AcceptedDate": "2002-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 11038965.0, "Total Donations (\u00a3)_end": 11980544.25, "Total Donations (\u00a3)_start": 941579.25}, {"AcceptedDate": "2003-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 14862158.0, "Total Donations (\u00a3)_end": 17837546.25, "Total Donations (\u00a3)_start": 2975388.25}, {"AcceptedDate": "2004-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 15698687.0, "Total Donations (\u00a3)_end": 19594253.75, "Total Donations (\u00a3)_start": 3895566.75}, {"AcceptedDate": "2005-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 21570580.0, "Total Donations (\u00a3)_end": 28507789.5, "Total Donations (\u00a3)_start": 6937209.5}, {"AcceptedDate": "2006-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 12421404.0, "Total Donations (\u00a3)_end": 17328480.5, "Total Donations (\u00a3)_start": 4907076.5}, {"AcceptedDate": "2007-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 20728976.0, "Total Donations (\u00a3)_end": 26298407.5, "Total Donations (\u00a3)_start": 5569431.5}, {"AcceptedDate": "2008-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 17848438.0, "Total Donations (\u00a3)_end": 23446057.5, "Total Donations (\u00a3)_start": 5597619.5}, {"AcceptedDate": "2009-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 16074011.0, "Total Donations (\u00a3)_end": 22534218.0, "Total Donations (\u00a3)_start": 6460207.0}, {"AcceptedDate": "2010-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 25121550.0, "Total Donations (\u00a3)_end": 31374671.5, "Total Donations (\u00a3)_start": 6253121.5}, {"AcceptedDate": "2011-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 19201508.0, "Total Donations (\u00a3)_end": 23767873.5, "Total Donations (\u00a3)_start": 4566365.5}, {"AcceptedDate": "2012-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 19347352.0, "Total Donations (\u00a3)_end": 22424963.25, "Total Donations (\u00a3)_start": 3077611.25}, {"AcceptedDate": "2013-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 20934112.0, "Total Donations (\u00a3)_end": 25306301.0, "Total Donations (\u00a3)_start": 4372189.0}, {"AcceptedDate": "2014-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 26290430.0, "Total Donations (\u00a3)_end": 35087386.0, "Total Donations (\u00a3)_start": 8796956.0}, {"AcceptedDate": "2015-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 28607266.0, "Total Donations (\u00a3)_end": 35790404.5, "Total Donations (\u00a3)_start": 7183138.5}, {"AcceptedDate": "2016-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 21274484.0, "Total Donations (\u00a3)_end": 28961142.0, "Total Donations (\u00a3)_start": 7686658.0}, {"AcceptedDate": "2017-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 23057952.0, "Total Donations (\u00a3)_end": 30922195.5, "Total Donations (\u00a3)_start": 7864243.5}, {"AcceptedDate": "2018-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 16661418.0, "Total Donations (\u00a3)_end": 21226198.5, "Total Donations (\u00a3)_start": 4564780.5}, {"AcceptedDate": "2019-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 24832664.0, "Total Donations (\u00a3)_end": 56474392.0, "Total Donations (\u00a3)_start": 31641728.0}, {"AcceptedDate": "2020-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 14476354.0, "Total Donations (\u00a3)_end": 21354916.5, "Total Donations (\u00a3)_start": 6878562.5}, {"AcceptedDate": "2021-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 17062328.0, "Total Donations (\u00a3)_end": 21911775.171875, "Total Donations (\u00a3)_start": 4849447.171875}, {"AcceptedDate": "2022-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 21076124.0, "Total Donations (\u00a3)_end": 27233791.5, "Total Donations (\u00a3)_start": 6157667.5}, {"AcceptedDate": "2023-01-01T00:00:00.000", "RegulatedEntityName": "Labour Party", "Total Donations (\u00a3)": 30536238.0, "Total Donations (\u00a3)_end": 39251269.0, "Total Donations (\u00a3)_start": 8715031.0}, {"AcceptedDate": "2001-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 1536893.75, "Total Donations (\u00a3)_end": 1536893.75, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2002-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 941579.25, "Total Donations (\u00a3)_end": 941579.25, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2003-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 2975388.25, "Total Donations (\u00a3)_end": 2975388.25, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2004-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 3895566.75, "Total Donations (\u00a3)_end": 3895566.75, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2005-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 6937209.5, "Total Donations (\u00a3)_end": 6937209.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2006-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 4907076.5, "Total Donations (\u00a3)_end": 4907076.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2007-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 5569431.5, "Total Donations (\u00a3)_end": 5569431.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2008-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 5597619.5, "Total Donations (\u00a3)_end": 5597619.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2009-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 6460207.0, "Total Donations (\u00a3)_end": 6460207.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2010-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 6253121.5, "Total Donations (\u00a3)_end": 6253121.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2011-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 4566365.5, "Total Donations (\u00a3)_end": 4566365.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2012-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 3077611.25, "Total Donations (\u00a3)_end": 3077611.25, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2013-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 4372189.0, "Total Donations (\u00a3)_end": 4372189.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2014-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 8796956.0, "Total Donations (\u00a3)_end": 8796956.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2015-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 7183138.5, "Total Donations (\u00a3)_end": 7183138.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2016-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 7686658.0, "Total Donations (\u00a3)_end": 7686658.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2017-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 7864243.5, "Total Donations (\u00a3)_end": 7864243.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2018-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 4564780.5, "Total Donations (\u00a3)_end": 4564780.5, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2019-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 20032728.0, "Total Donations (\u00a3)_end": 31641728.0, "Total Donations (\u00a3)_start": 11609000.0}, {"AcceptedDate": "2020-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 4803562.5, "Total Donations (\u00a3)_end": 6878562.5, "Total Donations (\u00a3)_start": 2075000.0}, {"AcceptedDate": "2021-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 4644528.0, "Total Donations (\u00a3)_end": 4849447.171875, "Total Donations (\u00a3)_start": 204919.171875}, {"AcceptedDate": "2022-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 6137667.5, "Total Donations (\u00a3)_end": 6157667.5, "Total Donations (\u00a3)_start": 20000.0}, {"AcceptedDate": "2023-01-01T00:00:00.000", "RegulatedEntityName": "Liberal Democrats", "Total Donations (\u00a3)": 8420031.0, "Total Donations (\u00a3)_end": 8715031.0, "Total Donations (\u00a3)_start": 295000.0}, {"AcceptedDate": "2001-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 16753830.0, "Total Donations (\u00a3)_end": 30345321.75, "Total Donations (\u00a3)_start": 13591491.75}, {"AcceptedDate": "2002-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 8515382.0, "Total Donations (\u00a3)_end": 20495926.25, "Total Donations (\u00a3)_start": 11980544.25}, {"AcceptedDate": "2003-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 8536737.0, "Total Donations (\u00a3)_end": 26374283.25, "Total Donations (\u00a3)_start": 17837546.25}, {"AcceptedDate": "2004-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 14463217.0, "Total Donations (\u00a3)_end": 34057470.75, "Total Donations (\u00a3)_start": 19594253.75}, {"AcceptedDate": "2005-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 20176992.0, "Total Donations (\u00a3)_end": 48684781.5, "Total Donations (\u00a3)_start": 28507789.5}, {"AcceptedDate": "2006-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 24116306.0, "Total Donations (\u00a3)_end": 41444786.5, "Total Donations (\u00a3)_start": 17328480.5}, {"AcceptedDate": "2007-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 26503486.0, "Total Donations (\u00a3)_end": 52801893.5, "Total Donations (\u00a3)_start": 26298407.5}, {"AcceptedDate": "2008-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 24816928.0, "Total Donations (\u00a3)_end": 48262985.5, "Total Donations (\u00a3)_start": 23446057.5}, {"AcceptedDate": "2009-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 32832864.0, "Total Donations (\u00a3)_end": 55367082.0, "Total Donations (\u00a3)_start": 22534218.0}, {"AcceptedDate": "2010-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 34146552.0, "Total Donations (\u00a3)_end": 65521223.5, "Total Donations (\u00a3)_start": 31374671.5}, {"AcceptedDate": "2011-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 15062518.0, "Total Donations (\u00a3)_end": 38830391.5, "Total Donations (\u00a3)_start": 23767873.5}, {"AcceptedDate": "2012-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 14123325.0, "Total Donations (\u00a3)_end": 36548288.25, "Total Donations (\u00a3)_start": 22424963.25}, {"AcceptedDate": "2013-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 16358445.0, "Total Donations (\u00a3)_end": 41664746.0, "Total Donations (\u00a3)_start": 25306301.0}, {"AcceptedDate": "2014-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 29366478.0, "Total Donations (\u00a3)_end": 64453864.0, "Total Donations (\u00a3)_start": 35087386.0}, {"AcceptedDate": "2015-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 33620588.0, "Total Donations (\u00a3)_end": 69410992.5, "Total Donations (\u00a3)_start": 35790404.5}, {"AcceptedDate": "2016-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 18031644.0, "Total Donations (\u00a3)_end": 46992786.0, "Total Donations (\u00a3)_start": 28961142.0}, {"AcceptedDate": "2017-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 37767236.0, "Total Donations (\u00a3)_end": 68689431.5, "Total Donations (\u00a3)_start": 30922195.5}, {"AcceptedDate": "2018-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 22059398.0, "Total Donations (\u00a3)_end": 43285596.5, "Total Donations (\u00a3)_start": 21226198.5}, {"AcceptedDate": "2019-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 52919576.0, "Total Donations (\u00a3)_end": 109393968.0, "Total Donations (\u00a3)_start": 56474392.0}, {"AcceptedDate": "2020-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 15625641.0, "Total Donations (\u00a3)_end": 36980557.5, "Total Donations (\u00a3)_start": 21354916.5}, {"AcceptedDate": "2021-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 20181166.0, "Total Donations (\u00a3)_end": 42092941.171875, "Total Donations (\u00a3)_start": 21911775.171875}, {"AcceptedDate": "2022-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 17905110.0, "Total Donations (\u00a3)_end": 45138901.5, "Total Donations (\u00a3)_start": 27233791.5}, {"AcceptedDate": "2023-01-01T00:00:00.000", "RegulatedEntityName": "Conservative and Unionist Party", "Total Donations (\u00a3)": 48189136.0, "Total Donations (\u00a3)_end": 87440405.0, "Total Donations (\u00a3)_start": 39251269.0}, {"AcceptedDate": "2019-01-01T00:00:00.000", "RegulatedEntityName": "Reform UK", "Total Donations (\u00a3)": 11609000.0, "Total Donations (\u00a3)_end": 11609000.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2020-01-01T00:00:00.000", "RegulatedEntityName": "Reform UK", "Total Donations (\u00a3)": 2075000.0, "Total Donations (\u00a3)_end": 2075000.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2021-01-01T00:00:00.000", "RegulatedEntityName": "Reform UK", "Total Donations (\u00a3)": 204919.172, "Total Donations (\u00a3)_end": 204919.171875, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2022-01-01T00:00:00.000", "RegulatedEntityName": "Reform UK", "Total Donations (\u00a3)": 20000.0, "Total Donations (\u00a3)_end": 20000.0, "Total Donations (\u00a3)_start": 0.0}, {"AcceptedDate": "2023-01-01T00:00:00.000", "RegulatedEntityName": "Reform UK", "Total Donations (\u00a3)": 295000.0, "Total Donations (\u00a3)_end": 295000.0, "Total Donations (\u00a3)_start": 0.0}], "transform": [{"type": "formula", "expr": "toDate(datum['AcceptedDate'])", "as": "AcceptedDate"}]}], "signals": [{"name": "width", "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 300", "on": [{"events": "window:resize", "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 300"}]}, {"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_6", "update": "vlSelectionResolve(\"param_6_store\", \"union\")"}, {"name": "param_6_AcceptedDate", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_6_translate_delta"}, "update": "panLinear(param_6_translate_anchor.extent_x, -param_6_translate_delta.x / width)"}, {"events": {"signal": "param_6_zoom_delta"}, "update": "zoomLinear(domain(\"x\"), param_6_zoom_anchor.x, param_6_zoom_delta)"}]}, {"name": "param_6_Total_Donations____", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_6_translate_delta"}, "update": "panLinear(param_6_translate_anchor.extent_y, param_6_translate_delta.y / height)"}, {"events": {"signal": "param_6_zoom_delta"}, "update": "zoomLinear(domain(\"y\"), param_6_zoom_anchor.y, param_6_zoom_delta)"}]}, {"name": "param_6_tuple", "on": [{"events": [{"signal": "param_6_AcceptedDate || param_6_Total_Donations____"}], "update": "param_6_AcceptedDate && param_6_Total_Donations____ ? {unit: \"\", fields: param_6_tuple_fields, values: [param_6_AcceptedDate,param_6_Total_Donations____]} : null"}]}, {"name": "param_6_tuple_fields", "value": [{"field": "AcceptedDate", "channel": "x", "type": "R"}, {"field": "Total Donations (\u00a3)", "channel": "y", "type": "R"}]}, {"name": "param_6_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: domain(\"x\"), extent_y: domain(\"y\")}"}]}, {"name": "param_6_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}], "update": "{x: param_6_translate_anchor.x - x(unit), y: param_6_translate_anchor.y - y(unit)}"}]}, {"name": "param_6_zoom_anchor", "on": [{"events": [{"source": "scope", "consume": true, "type": "wheel"}], "update": "{x: invert(\"x\", x(unit)), y: invert(\"y\", y(unit))}"}]}, {"name": "param_6_zoom_delta", "on": [{"events": [{"source": "scope", "type": "wheel", "consume": true}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_6_modify", "on": [{"events": {"signal": "param_6_tuple"}, "update": "modify(\"param_6_store\", param_6_tuple, true)"}]}], "marks": [{"type": "rect", "name": "marks", "from": {"data": "source_0"}, "encode": {"update": {"tooltip": {"signal": "{\"AcceptedDate\": timeFormat(datum[\"AcceptedDate\"], '%b %d, %Y'), \"Total Donations (\u00a3)\": format(datum[\"Total Donations (\u00a3)\"], \"\"), \"RegulatedEntityName\": isValid(datum[\"RegulatedEntityName\"]) ? datum[\"RegulatedEntityName\"] : \"\"+datum[\"RegulatedEntityName\"]}"}, "xc": {"field": "AcceptedDate", "scale": "x"}, "width": {"value": 5}, "y2": {"field": "Total Donations (\u00a3)_start", "scale": "y"}, "fill": {"field": "RegulatedEntityName", "scale": "color"}, "y": {"field": "Total Donations (\u00a3)_end", "scale": "y"}}}, "clip": true, "style": ["bar"], "interactive": true}], "scales": [{"name": "x", "type": "time", "domain": {"data": "source_0", "field": "AcceptedDate"}, "range": [0, {"signal": "width"}], "padding": 5, "domainRaw": {"signal": "param_6[\"AcceptedDate\"]"}}, {"name": "y", "type": "linear", "domain": {"data": "source_0", "fields": ["Total Donations (\u00a3)_start", "Total Donations (\u00a3)_end"]}, "range": [{"signal": "height"}, 0], "domainRaw": {"signal": "param_6[\"Total Donations (\u00a3)\"]"}, "nice": true, "zero": true}, {"name": "color", "type": "ordinal", "domain": ["Labour Party", "Conservative and Unionist Party", "Liberal Democrats", "Reform UK"], "range": ["#d50000", "#0087dc", "#FDBB30", "cyan"]}], "axes": [{"scale": "x", "ticks": false, "orient": "bottom", "aria": false, "labels": false, "tickCount": {"signal": "ceil(width/40)"}, "grid": true, "domain": false, "maxExtent": 0, "zindex": 0, "minExtent": 0, "gridScale": "y"}, {"scale": "y", "orient": "left", "maxExtent": 0, "minExtent": 0, "labels": false, "grid": true, "tickCount": {"signal": "ceil(height/40)"}, "aria": false, "zindex": 0, "domain": false, "gridScale": "x", "ticks": false}, {"scale": "x", "grid": false, "tickCount": {"signal": "ceil(width/40)"}, "orient": "bottom", "zindex": 0, "labelFlush": true, "title": "AcceptedDate", "labelOverlap": true}, {"scale": "y", "tickCount": {"signal": "ceil(height/40)"}, "title": "Total Donations (\u00a3)", "zindex": 0, "labelOverlap": true, "grid": false, "orient": "left"}], "style": "cell", "background": "white", "padding": 5, "legends": [{"fill": "color", "symbolType": "square", "title": "RegulatedEntityName"}], "autosize": {"type": "fit-x", "contains": "padding"}, "height": 300}, {"mode": "vega"});
</script>
</div>
</div>
</section>
</section>
<section id="median-donation-value" class="level2">
<h2 class="anchored" data-anchor-id="median-donation-value">Median donation value</h2>
<p>The total donations aren’t the only interesting metric here. I want to know what the average value of a donation is here. I won’t use the mean, as the values are very skewed<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, but the more robust median. I’ve included the interquartile range as bands either side of the line.</p>
<div id="0b31f767" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>donation_four_parties <span class="op">=</span> donations.with_columns(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"AcceptedDate"</span>).dt.year().alias(<span class="st">"Year"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"RegulatedEntityName"</span>).is_in(main_parties)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>line_four_parties <span class="op">=</span> alt.Chart(donation_four_parties).mark_line().encode(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="st">'median(Value)'</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span>alt.Color(<span class="st">"RegulatedEntityName"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>main_parties, <span class="bu">range</span><span class="op">=</span>party_colours))</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="st">"container"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>band_four_parties <span class="op">=</span> alt.Chart(donation_four_parties).mark_errorband(extent<span class="op">=</span><span class="st">'iqr'</span>).encode(</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span>alt.Y(<span class="st">'Value'</span>).title(<span class="st">'Median Value (£)'</span>),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span>alt.Color(<span class="st">"RegulatedEntityName"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>main_parties, <span class="bu">range</span><span class="op">=</span>party_colours))</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>band_four_parties <span class="op">+</span> line_four_parties</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="25">

<style>
  #altair-viz-7707a550d15145998456c567c7c0c755.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7707a550d15145998456c567c7c0c755.vega-embed details,
  #altair-viz-7707a550d15145998456c567c7c0c755.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7707a550d15145998456c567c7c0c755"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7707a550d15145998456c567c7c0c755") {
      outputDiv = document.getElementById("altair-viz-7707a550d15145998456c567c7c0c755");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "source_0"}, {"name": "data_0", "values": [{"RegulatedEntityName": "Labour Party", "Year": 2023, "lower_Value": 1927.0, "upper_Value": 16368.7900390625, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2023, "lower_Value": 1000.0, "upper_Value": 5000.0, "center_Value": 2500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2023, "lower_Value": 2301.5250244140625, "upper_Value": 11300.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Reform UK", "Year": 2023, "lower_Value": 10000.0, "upper_Value": 47500.0, "center_Value": 17500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2022, "lower_Value": 2000.0, "upper_Value": 15000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2022, "lower_Value": 1506.8099975585938, "upper_Value": 12500.0, "center_Value": 4200.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2022, "lower_Value": 1000.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Reform UK", "Year": 2022, "lower_Value": 20000.0, "upper_Value": 20000.0, "center_Value": 20000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2021, "lower_Value": 859.5, "upper_Value": 3710.0, "center_Value": 1586.0}, {"RegulatedEntityName": "Labour Party", "Year": 2021, "lower_Value": 1375.5699462890625, "upper_Value": 10000.0, "center_Value": 3238.84}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2021, "lower_Value": 2000.0, "upper_Value": 15000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Reform UK", "Year": 2021, "lower_Value": 23750.0, "upper_Value": 30479.79248046875, "center_Value": 25000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2020, "lower_Value": 765.0, "upper_Value": 3001.64990234375, "center_Value": 1336.965}, {"RegulatedEntityName": "Labour Party", "Year": 2020, "lower_Value": 1500.0, "upper_Value": 11184.3525390625, "center_Value": 3320.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2020, "lower_Value": 2149.91748046875, "upper_Value": 15000.0, "center_Value": 8154.05}, {"RegulatedEntityName": "Reform UK", "Year": 2020, "lower_Value": 25000.0, "upper_Value": 175000.0, "center_Value": 50000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2019, "lower_Value": 2000.0, "upper_Value": 10000.0, "center_Value": 3687.39}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2019, "lower_Value": 2500.0, "upper_Value": 11223.74267578125, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2019, "lower_Value": 2000.0, "upper_Value": 7559.375, "center_Value": 3811.25}, {"RegulatedEntityName": "Reform UK", "Year": 2019, "lower_Value": 15000.0, "upper_Value": 100000.0, "center_Value": 50000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2018, "lower_Value": 2000.0, "upper_Value": 9731.05517578125, "center_Value": 3166.18}, {"RegulatedEntityName": "Labour Party", "Year": 2018, "lower_Value": 2367.6949462890625, "upper_Value": 11162.25, "center_Value": 4400.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2018, "lower_Value": 3000.0, "upper_Value": 20000.0, "center_Value": 8316.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2017, "lower_Value": 1852.0, "upper_Value": 5070.5, "center_Value": 2902.35}, {"RegulatedEntityName": "Labour Party", "Year": 2017, "lower_Value": 1684.0475463867188, "upper_Value": 5119.5, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2017, "lower_Value": 2500.0, "upper_Value": 10639.900390625, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2016, "lower_Value": 1500.0, "upper_Value": 10000.0, "center_Value": 3015.25}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2016, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2400.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2016, "lower_Value": 3000.0, "upper_Value": 21250.0, "center_Value": 9000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2015, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2015, "lower_Value": 1328.375, "upper_Value": 5436.090087890625, "center_Value": 2500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2015, "lower_Value": 2500.0, "upper_Value": 10000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2014, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2400.0}, {"RegulatedEntityName": "Labour Party", "Year": 2014, "lower_Value": 1509.0075073242188, "upper_Value": 8749.38720703125, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2014, "lower_Value": 2500.0, "upper_Value": 12500.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2013, "lower_Value": 1749.3599853515625, "upper_Value": 4500.0, "center_Value": 2200.0}, {"RegulatedEntityName": "Labour Party", "Year": 2013, "lower_Value": 1299.0, "upper_Value": 10000.0, "center_Value": 2550.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2013, "lower_Value": 2500.0, "upper_Value": 13500.0, "center_Value": 6250.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2012, "lower_Value": 1768.875, "upper_Value": 3288.75, "center_Value": 2000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2012, "lower_Value": 2500.0, "upper_Value": 20000.0, "center_Value": 8500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2012, "lower_Value": 1147.5, "upper_Value": 7763.125, "center_Value": 2325.73}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2011, "lower_Value": 1629.1050109863281, "upper_Value": 3341.0399780273438, "center_Value": 2056.0}, {"RegulatedEntityName": "Labour Party", "Year": 2011, "lower_Value": 1200.0, "upper_Value": 5580.0, "center_Value": 2242.5}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2011, "lower_Value": 2650.75, "upper_Value": 20525.0, "center_Value": 8500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2010, "lower_Value": 1200.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2010, "lower_Value": 1750.0, "upper_Value": 4500.0, "center_Value": 2250.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2010, "lower_Value": 2500.0, "upper_Value": 13350.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2009, "lower_Value": 2000.0, "upper_Value": 11727.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2009, "lower_Value": 1103.760009765625, "upper_Value": 2500.0, "center_Value": 1400.0}, {"RegulatedEntityName": "Labour Party", "Year": 2009, "lower_Value": 600.0, "upper_Value": 3965.0775146484375, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2008, "lower_Value": 1125.0, "upper_Value": 2695.0, "center_Value": 1454.07}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2008, "lower_Value": 2000.0, "upper_Value": 14209.8603515625, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2008, "lower_Value": 550.0, "upper_Value": 4000.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2007, "lower_Value": 600.0, "upper_Value": 3818.5, "center_Value": 1400.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2007, "lower_Value": 2000.0, "upper_Value": 14355.0, "center_Value": 5298.64}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2007, "lower_Value": 1200.0, "upper_Value": 3251.2999877929688, "center_Value": 1575.625}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2006, "lower_Value": 1750.0, "upper_Value": 11000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2006, "lower_Value": 1200.0, "upper_Value": 2500.02001953125, "center_Value": 1500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2006, "lower_Value": 650.0, "upper_Value": 3822.875, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2005, "lower_Value": 1200.0, "upper_Value": 3000.0, "center_Value": 1700.0}, {"RegulatedEntityName": "Labour Party", "Year": 2005, "lower_Value": 1000.0, "upper_Value": 4000.0, "center_Value": 1800.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2005, "lower_Value": 1625.7674560546875, "upper_Value": 8304.5, "center_Value": 3500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2004, "lower_Value": 1662.5, "upper_Value": 10000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2004, "lower_Value": 700.0, "upper_Value": 4500.0, "center_Value": 1691.5}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2004, "lower_Value": 1200.0, "upper_Value": 3813.9500732421875, "center_Value": 1712.5}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2003, "lower_Value": 1200.0, "upper_Value": 2834.625, "center_Value": 1500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2003, "lower_Value": 1500.0, "upper_Value": 10000.0, "center_Value": 4300.0}, {"RegulatedEntityName": "Labour Party", "Year": 2003, "lower_Value": 884.0, "upper_Value": 6000.0, "center_Value": 1925.0}, {"RegulatedEntityName": "Labour Party", "Year": 2002, "lower_Value": 500.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2002, "lower_Value": 1600.0, "upper_Value": 10000.0, "center_Value": 4688.25}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2002, "lower_Value": 1104.9125061035156, "upper_Value": 2235.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2001, "lower_Value": 1157.9500122070312, "upper_Value": 3069.405029296875, "center_Value": 1612.7}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2001, "lower_Value": 2000.0, "upper_Value": 10000.0, "center_Value": 4000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2001, "lower_Value": 1000.0, "upper_Value": 4054.0, "center_Value": 2000.0}]}, {"name": "data_1", "values": [{"Year": 2023, "RegulatedEntityName": "Labour Party", "median_Value": 5000.0}, {"Year": 2023, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2500.0}, {"Year": 2023, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2023, "RegulatedEntityName": "Reform UK", "median_Value": 17500.0}, {"Year": 2022, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2022, "RegulatedEntityName": "Labour Party", "median_Value": 4200.0}, {"Year": 2022, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2000.0}, {"Year": 2022, "RegulatedEntityName": "Reform UK", "median_Value": 20000.0}, {"Year": 2021, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1586.0}, {"Year": 2021, "RegulatedEntityName": "Labour Party", "median_Value": 3238.84}, {"Year": 2021, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2021, "RegulatedEntityName": "Reform UK", "median_Value": 25000.0}, {"Year": 2020, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1336.965}, {"Year": 2020, "RegulatedEntityName": "Labour Party", "median_Value": 3320.0}, {"Year": 2020, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8154.05}, {"Year": 2020, "RegulatedEntityName": "Reform UK", "median_Value": 50000.0}, {"Year": 2019, "RegulatedEntityName": "Liberal Democrats", "median_Value": 3687.39}, {"Year": 2019, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2019, "RegulatedEntityName": "Labour Party", "median_Value": 3811.25}, {"Year": 2019, "RegulatedEntityName": "Reform UK", "median_Value": 50000.0}, {"Year": 2018, "RegulatedEntityName": "Liberal Democrats", "median_Value": 3166.18}, {"Year": 2018, "RegulatedEntityName": "Labour Party", "median_Value": 4400.0}, {"Year": 2018, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8316.0}, {"Year": 2017, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2902.35}, {"Year": 2017, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2017, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2016, "RegulatedEntityName": "Labour Party", "median_Value": 3015.25}, {"Year": 2016, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2400.0}, {"Year": 2016, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 9000.0}, {"Year": 2015, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2500.0}, {"Year": 2015, "RegulatedEntityName": "Labour Party", "median_Value": 2500.0}, {"Year": 2015, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2014, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2400.0}, {"Year": 2014, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2014, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2013, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2200.0}, {"Year": 2013, "RegulatedEntityName": "Labour Party", "median_Value": 2550.0}, {"Year": 2013, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 6250.0}, {"Year": 2012, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2000.0}, {"Year": 2012, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8500.0}, {"Year": 2012, "RegulatedEntityName": "Labour Party", "median_Value": 2325.73}, {"Year": 2011, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2056.0}, {"Year": 2011, "RegulatedEntityName": "Labour Party", "median_Value": 2242.5}, {"Year": 2011, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8500.0}, {"Year": 2010, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}, {"Year": 2010, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2250.0}, {"Year": 2010, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2009, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2009, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1400.0}, {"Year": 2009, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2008, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1454.07}, {"Year": 2008, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2008, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2007, "RegulatedEntityName": "Labour Party", "median_Value": 1400.0}, {"Year": 2007, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5298.64}, {"Year": 2007, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1575.625}, {"Year": 2006, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2006, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2006, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2005, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1700.0}, {"Year": 2005, "RegulatedEntityName": "Labour Party", "median_Value": 1800.0}, {"Year": 2005, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 3500.0}, {"Year": 2004, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2004, "RegulatedEntityName": "Labour Party", "median_Value": 1691.5}, {"Year": 2004, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1712.5}, {"Year": 2003, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2003, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4300.0}, {"Year": 2003, "RegulatedEntityName": "Labour Party", "median_Value": 1925.0}, {"Year": 2002, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}, {"Year": 2002, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4688.25}, {"Year": 2002, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2001, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1612.7}, {"Year": 2001, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4000.0}, {"Year": 2001, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}]}], "signals": [{"name": "width", "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 300", "on": [{"events": "window:resize", "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 300"}]}], "marks": [{"type": "group", "name": "layer_0_layer_0_pathgroup", "from": {"facet": {"data": "data_0", "name": "faceted_path_layer_0_layer_0_main", "groupby": ["RegulatedEntityName"]}}, "encode": {"update": {"width": {"field": {"signal": null, "datum": null, "group": "width", "parent": null}}, "height": {"field": {"signal": null, "datum": null, "group": "height", "parent": null}}}}, "marks": [{"type": "area", "name": "layer_0_layer_0_marks", "from": {"data": "faceted_path_layer_0_layer_0_main"}, "sort": {"field": "x"}, "encode": {"update": {"opacity": {"value": 0.3}, "x": {"field": "Year", "scale": "x"}, "defined": {"signal": "isValid(datum[\"Year\"]) && isFinite(+datum[\"Year\"]) && isValid(datum[\"lower_Value\"]) && isFinite(+datum[\"lower_Value\"])"}, "y2": {"field": "upper_Value", "scale": "y"}, "y": {"field": "lower_Value", "scale": "y"}, "orient": {"value": "vertical"}, "tooltip": {"signal": "{\"Q3 of Value\": format(datum[\"upper_Value\"], \"\"), \"Q1 of Value\": format(datum[\"lower_Value\"], \"\"), \"Median of Value\": format(datum[\"center_Value\"], \"\"), \"RegulatedEntityName\": isValid(datum[\"RegulatedEntityName\"]) ? datum[\"RegulatedEntityName\"] : \"\"+datum[\"RegulatedEntityName\"], \"Year\": format(datum[\"Year\"], \"\")}"}, "fill": {"field": "RegulatedEntityName", "scale": "color"}}}, "style": ["area", "errorband-band"]}]}, {"type": "group", "name": "layer_1_pathgroup", "from": {"facet": {"data": "data_1", "name": "faceted_path_layer_1_main", "groupby": ["RegulatedEntityName"]}}, "encode": {"update": {"width": {"field": {"signal": null, "datum": null, "group": "width", "parent": null}}, "height": {"field": {"signal": null, "datum": null, "group": "height", "parent": null}}}}, "marks": [{"type": "line", "name": "layer_1_marks", "from": {"data": "faceted_path_layer_1_main"}, "sort": {"field": "x"}, "encode": {"update": {"stroke": {"field": "RegulatedEntityName", "scale": "color"}, "x": {"field": "Year", "scale": "x"}, "defined": {"signal": "isValid(datum[\"Year\"]) && isFinite(+datum[\"Year\"]) && isValid(datum[\"median_Value\"]) && isFinite(+datum[\"median_Value\"])"}, "y": {"field": "median_Value", "scale": "y"}}}, "style": ["line"]}]}], "scales": [{"name": "x", "type": "linear", "domain": {"fields": [{"data": "data_0", "field": "Year"}, {"data": "data_1", "field": "Year"}]}, "range": [0, {"signal": "width"}], "zero": false, "nice": true}, {"name": "y", "type": "linear", "domain": {"fields": [{"data": "data_0", "field": "lower_Value"}, {"data": "data_0", "field": "upper_Value"}, {"data": "data_1", "field": "median_Value"}]}, "range": [{"signal": "height"}, 0], "zero": true, "nice": true}, {"name": "color", "type": "ordinal", "domain": ["Labour Party", "Conservative and Unionist Party", "Liberal Democrats", "Reform UK"], "range": ["#d50000", "#0087dc", "#FDBB30", "cyan"]}], "axes": [{"scale": "x", "maxExtent": 0, "domain": false, "tickCount": {"signal": "ceil(width/40)"}, "minExtent": 0, "aria": false, "ticks": false, "orient": "bottom", "labels": false, "grid": true, "zindex": 0, "gridScale": "y"}, {"scale": "y", "maxExtent": 0, "grid": true, "aria": false, "zindex": 0, "minExtent": 0, "domain": false, "labels": false, "gridScale": "x", "tickCount": {"signal": "ceil(height/40)"}, "orient": "left", "ticks": false}, {"scale": "x", "tickCount": {"signal": "ceil(width/40)"}, "title": "Year", "zindex": 0, "orient": "bottom", "grid": false, "labelFlush": true, "labelOverlap": true}, {"scale": "y", "title": "Median Value (\u00a3)", "orient": "left", "tickCount": {"signal": "ceil(height/40)"}, "grid": false, "labelOverlap": true, "zindex": 0}], "background": "white", "legends": [{"fill": "color", "symbolType": "circle", "title": "RegulatedEntityName", "encode": {"symbols": {"update": {"opacity": {"value": 0.3}}}}, "stroke": "color"}], "autosize": {"type": "fit-x", "contains": "padding"}, "style": "cell", "padding": 5, "height": 300}, {"mode": "vega"});
</script>
</div>
</div>
<p>I’ll admit, I included Reform UK for humour here. Let’s just look at the three major parties.</p>
<div id="34767641" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>donation_three_parties <span class="op">=</span> donations.with_columns(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"AcceptedDate"</span>).dt.year().alias(<span class="st">"Year"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"RegulatedEntityName"</span>).is_in(main_parties[:<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>line_three_parties <span class="op">=</span> alt.Chart(donation_three_parties).mark_line().encode(</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="st">'median(Value)'</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span>alt.Color(<span class="st">"RegulatedEntityName"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>main_parties[:<span class="op">-</span><span class="dv">1</span>], <span class="bu">range</span><span class="op">=</span>party_colours[:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="st">"container"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>band_three_parties <span class="op">=</span> alt.Chart(donation_three_parties).mark_errorband(extent<span class="op">=</span><span class="st">'iqr'</span>).encode(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span>alt.Y(<span class="st">'Value'</span>).title(<span class="st">'Median Value (£)'</span>),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span>alt.Color(<span class="st">"RegulatedEntityName"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>main_parties[:<span class="op">-</span><span class="dv">1</span>], <span class="bu">range</span><span class="op">=</span>party_colours[:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>band_three_parties <span class="op">+</span> line_three_parties</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="26">

<style>
  #altair-viz-2836ec0693db4c2b8388618990599672.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-2836ec0693db4c2b8388618990599672.vega-embed details,
  #altair-viz-2836ec0693db4c2b8388618990599672.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-2836ec0693db4c2b8388618990599672"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2836ec0693db4c2b8388618990599672") {
      outputDiv = document.getElementById("altair-viz-2836ec0693db4c2b8388618990599672");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "source_0"}, {"name": "data_0", "values": [{"RegulatedEntityName": "Labour Party", "Year": 2023, "lower_Value": 1927.0, "upper_Value": 16368.7900390625, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2023, "lower_Value": 1000.0, "upper_Value": 5000.0, "center_Value": 2500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2023, "lower_Value": 2301.5250244140625, "upper_Value": 11300.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2022, "lower_Value": 2000.0, "upper_Value": 15000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2022, "lower_Value": 1506.8099975585938, "upper_Value": 12500.0, "center_Value": 4200.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2022, "lower_Value": 1000.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2021, "lower_Value": 859.5, "upper_Value": 3710.0, "center_Value": 1586.0}, {"RegulatedEntityName": "Labour Party", "Year": 2021, "lower_Value": 1375.5699462890625, "upper_Value": 10000.0, "center_Value": 3238.84}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2021, "lower_Value": 2000.0, "upper_Value": 15000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2020, "lower_Value": 765.0, "upper_Value": 3001.64990234375, "center_Value": 1336.965}, {"RegulatedEntityName": "Labour Party", "Year": 2020, "lower_Value": 1500.0, "upper_Value": 11184.3525390625, "center_Value": 3320.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2020, "lower_Value": 2149.91748046875, "upper_Value": 15000.0, "center_Value": 8154.05}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2019, "lower_Value": 2000.0, "upper_Value": 10000.0, "center_Value": 3687.39}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2019, "lower_Value": 2500.0, "upper_Value": 11223.74267578125, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2019, "lower_Value": 2000.0, "upper_Value": 7559.375, "center_Value": 3811.25}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2018, "lower_Value": 2000.0, "upper_Value": 9731.05517578125, "center_Value": 3166.18}, {"RegulatedEntityName": "Labour Party", "Year": 2018, "lower_Value": 2367.6949462890625, "upper_Value": 11162.25, "center_Value": 4400.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2018, "lower_Value": 3000.0, "upper_Value": 20000.0, "center_Value": 8316.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2017, "lower_Value": 1852.0, "upper_Value": 5070.5, "center_Value": 2902.35}, {"RegulatedEntityName": "Labour Party", "Year": 2017, "lower_Value": 1684.0475463867188, "upper_Value": 5119.5, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2017, "lower_Value": 2500.0, "upper_Value": 10639.900390625, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2016, "lower_Value": 1500.0, "upper_Value": 10000.0, "center_Value": 3015.25}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2016, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2400.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2016, "lower_Value": 3000.0, "upper_Value": 21250.0, "center_Value": 9000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2015, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2015, "lower_Value": 1328.375, "upper_Value": 5436.090087890625, "center_Value": 2500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2015, "lower_Value": 2500.0, "upper_Value": 10000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2014, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2400.0}, {"RegulatedEntityName": "Labour Party", "Year": 2014, "lower_Value": 1509.0075073242188, "upper_Value": 8749.38720703125, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2014, "lower_Value": 2500.0, "upper_Value": 12500.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2013, "lower_Value": 1749.3599853515625, "upper_Value": 4500.0, "center_Value": 2200.0}, {"RegulatedEntityName": "Labour Party", "Year": 2013, "lower_Value": 1299.0, "upper_Value": 10000.0, "center_Value": 2550.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2013, "lower_Value": 2500.0, "upper_Value": 13500.0, "center_Value": 6250.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2012, "lower_Value": 1768.875, "upper_Value": 3288.75, "center_Value": 2000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2012, "lower_Value": 2500.0, "upper_Value": 20000.0, "center_Value": 8500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2012, "lower_Value": 1147.5, "upper_Value": 7763.125, "center_Value": 2325.73}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2011, "lower_Value": 1629.1050109863281, "upper_Value": 3341.0399780273438, "center_Value": 2056.0}, {"RegulatedEntityName": "Labour Party", "Year": 2011, "lower_Value": 1200.0, "upper_Value": 5580.0, "center_Value": 2242.5}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2011, "lower_Value": 2650.75, "upper_Value": 20525.0, "center_Value": 8500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2010, "lower_Value": 1200.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2010, "lower_Value": 1750.0, "upper_Value": 4500.0, "center_Value": 2250.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2010, "lower_Value": 2500.0, "upper_Value": 13350.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2009, "lower_Value": 2000.0, "upper_Value": 11727.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2009, "lower_Value": 1103.760009765625, "upper_Value": 2500.0, "center_Value": 1400.0}, {"RegulatedEntityName": "Labour Party", "Year": 2009, "lower_Value": 600.0, "upper_Value": 3965.0775146484375, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2008, "lower_Value": 1125.0, "upper_Value": 2695.0, "center_Value": 1454.07}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2008, "lower_Value": 2000.0, "upper_Value": 14209.8603515625, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2008, "lower_Value": 550.0, "upper_Value": 4000.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2007, "lower_Value": 600.0, "upper_Value": 3818.5, "center_Value": 1400.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2007, "lower_Value": 2000.0, "upper_Value": 14355.0, "center_Value": 5298.64}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2007, "lower_Value": 1200.0, "upper_Value": 3251.2999877929688, "center_Value": 1575.625}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2006, "lower_Value": 1750.0, "upper_Value": 11000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2006, "lower_Value": 1200.0, "upper_Value": 2500.02001953125, "center_Value": 1500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2006, "lower_Value": 650.0, "upper_Value": 3822.875, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2005, "lower_Value": 1200.0, "upper_Value": 3000.0, "center_Value": 1700.0}, {"RegulatedEntityName": "Labour Party", "Year": 2005, "lower_Value": 1000.0, "upper_Value": 4000.0, "center_Value": 1800.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2005, "lower_Value": 1625.7674560546875, "upper_Value": 8304.5, "center_Value": 3500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2004, "lower_Value": 1662.5, "upper_Value": 10000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2004, "lower_Value": 700.0, "upper_Value": 4500.0, "center_Value": 1691.5}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2004, "lower_Value": 1200.0, "upper_Value": 3813.9500732421875, "center_Value": 1712.5}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2003, "lower_Value": 1200.0, "upper_Value": 2834.625, "center_Value": 1500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2003, "lower_Value": 1500.0, "upper_Value": 10000.0, "center_Value": 4300.0}, {"RegulatedEntityName": "Labour Party", "Year": 2003, "lower_Value": 884.0, "upper_Value": 6000.0, "center_Value": 1925.0}, {"RegulatedEntityName": "Labour Party", "Year": 2002, "lower_Value": 500.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2002, "lower_Value": 1600.0, "upper_Value": 10000.0, "center_Value": 4688.25}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2002, "lower_Value": 1104.9125061035156, "upper_Value": 2235.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2001, "lower_Value": 1157.9500122070312, "upper_Value": 3069.405029296875, "center_Value": 1612.7}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2001, "lower_Value": 2000.0, "upper_Value": 10000.0, "center_Value": 4000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2001, "lower_Value": 1000.0, "upper_Value": 4054.0, "center_Value": 2000.0}]}, {"name": "data_1", "values": [{"Year": 2023, "RegulatedEntityName": "Labour Party", "median_Value": 5000.0}, {"Year": 2023, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2500.0}, {"Year": 2023, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2022, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2022, "RegulatedEntityName": "Labour Party", "median_Value": 4200.0}, {"Year": 2022, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2000.0}, {"Year": 2021, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1586.0}, {"Year": 2021, "RegulatedEntityName": "Labour Party", "median_Value": 3238.84}, {"Year": 2021, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2020, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1336.965}, {"Year": 2020, "RegulatedEntityName": "Labour Party", "median_Value": 3320.0}, {"Year": 2020, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8154.05}, {"Year": 2019, "RegulatedEntityName": "Liberal Democrats", "median_Value": 3687.39}, {"Year": 2019, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2019, "RegulatedEntityName": "Labour Party", "median_Value": 3811.25}, {"Year": 2018, "RegulatedEntityName": "Liberal Democrats", "median_Value": 3166.18}, {"Year": 2018, "RegulatedEntityName": "Labour Party", "median_Value": 4400.0}, {"Year": 2018, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8316.0}, {"Year": 2017, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2902.35}, {"Year": 2017, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2017, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2016, "RegulatedEntityName": "Labour Party", "median_Value": 3015.25}, {"Year": 2016, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2400.0}, {"Year": 2016, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 9000.0}, {"Year": 2015, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2500.0}, {"Year": 2015, "RegulatedEntityName": "Labour Party", "median_Value": 2500.0}, {"Year": 2015, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2014, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2400.0}, {"Year": 2014, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2014, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2013, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2200.0}, {"Year": 2013, "RegulatedEntityName": "Labour Party", "median_Value": 2550.0}, {"Year": 2013, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 6250.0}, {"Year": 2012, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2000.0}, {"Year": 2012, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8500.0}, {"Year": 2012, "RegulatedEntityName": "Labour Party", "median_Value": 2325.73}, {"Year": 2011, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2056.0}, {"Year": 2011, "RegulatedEntityName": "Labour Party", "median_Value": 2242.5}, {"Year": 2011, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8500.0}, {"Year": 2010, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}, {"Year": 2010, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2250.0}, {"Year": 2010, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2009, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2009, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1400.0}, {"Year": 2009, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2008, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1454.07}, {"Year": 2008, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2008, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2007, "RegulatedEntityName": "Labour Party", "median_Value": 1400.0}, {"Year": 2007, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5298.64}, {"Year": 2007, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1575.625}, {"Year": 2006, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2006, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2006, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2005, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1700.0}, {"Year": 2005, "RegulatedEntityName": "Labour Party", "median_Value": 1800.0}, {"Year": 2005, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 3500.0}, {"Year": 2004, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2004, "RegulatedEntityName": "Labour Party", "median_Value": 1691.5}, {"Year": 2004, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1712.5}, {"Year": 2003, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2003, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4300.0}, {"Year": 2003, "RegulatedEntityName": "Labour Party", "median_Value": 1925.0}, {"Year": 2002, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}, {"Year": 2002, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4688.25}, {"Year": 2002, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2001, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1612.7}, {"Year": 2001, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4000.0}, {"Year": 2001, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}]}], "signals": [{"name": "width", "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 300", "on": [{"events": "window:resize", "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 300"}]}], "marks": [{"type": "group", "name": "layer_0_layer_0_pathgroup", "from": {"facet": {"data": "data_0", "name": "faceted_path_layer_0_layer_0_main", "groupby": ["RegulatedEntityName"]}}, "encode": {"update": {"width": {"field": {"signal": null, "datum": null, "group": "width", "parent": null}}, "height": {"field": {"signal": null, "datum": null, "group": "height", "parent": null}}}}, "marks": [{"type": "area", "name": "layer_0_layer_0_marks", "from": {"data": "faceted_path_layer_0_layer_0_main"}, "sort": {"field": "x"}, "encode": {"update": {"orient": {"value": "vertical"}, "y2": {"field": "upper_Value", "scale": "y"}, "fill": {"field": "RegulatedEntityName", "scale": "color"}, "y": {"field": "lower_Value", "scale": "y"}, "defined": {"signal": "isValid(datum[\"Year\"]) && isFinite(+datum[\"Year\"]) && isValid(datum[\"lower_Value\"]) && isFinite(+datum[\"lower_Value\"])"}, "opacity": {"value": 0.3}, "tooltip": {"signal": "{\"Q3 of Value\": format(datum[\"upper_Value\"], \"\"), \"Q1 of Value\": format(datum[\"lower_Value\"], \"\"), \"Median of Value\": format(datum[\"center_Value\"], \"\"), \"RegulatedEntityName\": isValid(datum[\"RegulatedEntityName\"]) ? datum[\"RegulatedEntityName\"] : \"\"+datum[\"RegulatedEntityName\"], \"Year\": format(datum[\"Year\"], \"\")}"}, "x": {"field": "Year", "scale": "x"}}}, "style": ["area", "errorband-band"]}]}, {"type": "group", "name": "layer_1_pathgroup", "from": {"facet": {"data": "data_1", "name": "faceted_path_layer_1_main", "groupby": ["RegulatedEntityName"]}}, "encode": {"update": {"width": {"field": {"signal": null, "datum": null, "group": "width", "parent": null}}, "height": {"field": {"signal": null, "datum": null, "group": "height", "parent": null}}}}, "marks": [{"type": "line", "name": "layer_1_marks", "from": {"data": "faceted_path_layer_1_main"}, "sort": {"field": "x"}, "encode": {"update": {"y": {"field": "median_Value", "scale": "y"}, "x": {"field": "Year", "scale": "x"}, "defined": {"signal": "isValid(datum[\"Year\"]) && isFinite(+datum[\"Year\"]) && isValid(datum[\"median_Value\"]) && isFinite(+datum[\"median_Value\"])"}, "stroke": {"field": "RegulatedEntityName", "scale": "color"}}}, "style": ["line"]}]}], "scales": [{"name": "x", "type": "linear", "domain": {"fields": [{"data": "data_0", "field": "Year"}, {"data": "data_1", "field": "Year"}]}, "range": [0, {"signal": "width"}], "nice": true, "zero": false}, {"name": "y", "type": "linear", "domain": {"fields": [{"data": "data_0", "field": "lower_Value"}, {"data": "data_0", "field": "upper_Value"}, {"data": "data_1", "field": "median_Value"}]}, "range": [{"signal": "height"}, 0], "nice": true, "zero": true}, {"name": "color", "type": "ordinal", "domain": ["Labour Party", "Conservative and Unionist Party", "Liberal Democrats"], "range": ["#d50000", "#0087dc", "#FDBB30"]}], "axes": [{"scale": "x", "orient": "bottom", "maxExtent": 0, "minExtent": 0, "labels": false, "ticks": false, "aria": false, "zindex": 0, "tickCount": {"signal": "ceil(width/40)"}, "grid": true, "gridScale": "y", "domain": false}, {"scale": "y", "gridScale": "x", "tickCount": {"signal": "ceil(height/40)"}, "minExtent": 0, "maxExtent": 0, "ticks": false, "orient": "left", "labels": false, "grid": true, "domain": false, "aria": false, "zindex": 0}, {"scale": "x", "zindex": 0, "grid": false, "labelFlush": true, "orient": "bottom", "labelOverlap": true, "tickCount": {"signal": "ceil(width/40)"}, "title": "Year"}, {"scale": "y", "zindex": 0, "orient": "left", "labelOverlap": true, "title": "Median Value (\u00a3)", "grid": false, "tickCount": {"signal": "ceil(height/40)"}}], "legends": [{"fill": "color", "symbolType": "circle", "title": "RegulatedEntityName", "encode": {"symbols": {"update": {"opacity": {"value": 0.3}}}}, "stroke": "color"}], "autosize": {"type": "fit-x", "contains": "padding"}, "height": 300, "background": "white", "padding": 5, "style": "cell"}, {"mode": "vega"});
</script>
</div>
</div>
<p>Remarkably, between 2006 and 2012, the median value of donations to the Conservatives was greater than the 75th centile of Labour. Labour and the Liberal Democrats had similar distributions of donations until 2020. The post-coalition elections were not kind to the Lib Dems.</p>
<div id="aca4996d" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>donations.with_columns(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"AcceptedDate"</span>).dt.year().alias(<span class="st">"Year"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>).select(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"Value"</span>, <span class="st">"Year"</span>, <span class="st">"NatureOfDonation"</span>]</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>).sort(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"Year"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>).group_by(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"Year"</span>, <span class="st">"NatureOfDonation"</span>]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>).agg(</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"Value"</span>).<span class="bu">sum</span>()</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>).plot.line(</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">"Year"</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="st">"Value"</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span><span class="st">"NatureOfDonation"</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="st">"container"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="27">

<style>
  #altair-viz-f8820daf83f04c23a0fbc3ff24da2b78.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-f8820daf83f04c23a0fbc3ff24da2b78.vega-embed details,
  #altair-viz-f8820daf83f04c23a0fbc3ff24da2b78.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-f8820daf83f04c23a0fbc3ff24da2b78"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-f8820daf83f04c23a0fbc3ff24da2b78") {
      outputDiv = document.getElementById("altair-viz-f8820daf83f04c23a0fbc3ff24da2b78");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "param_7_store"}, {"name": "source_0", "values": [{"Year": 2023, "NatureOfDonation": null, "Value": 75271488.0}, {"Year": 2018, "NatureOfDonation": "Staff costs", "Value": 531757.0}, {"Year": 2022, "NatureOfDonation": "Other", "Value": 63505.094}, {"Year": 2006, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 280352.188}, {"Year": 2013, "NatureOfDonation": "Advertising", "Value": 105127.859}, {"Year": 2019, "NatureOfDonation": "Premises", "Value": 161234.5}, {"Year": 2003, "NatureOfDonation": "Other", "Value": 43505.277}, {"Year": 2016, "NatureOfDonation": "Consultancy services", "Value": 9995.0}, {"Year": 2002, "NatureOfDonation": "Administration services", "Value": 25385.0}, {"Year": 2021, "NatureOfDonation": "Hospitality", "Value": 82559.859}, {"Year": 2019, "NatureOfDonation": null, "Value": 103062304.0}, {"Year": 2003, "NatureOfDonation": "Short Money (House of Commons)", "Value": 4973661.5}, {"Year": 2007, "NatureOfDonation": "Loan conversion", "Value": 12000.0}, {"Year": 2011, "NatureOfDonation": "Premises", "Value": 288106.5}, {"Year": 2017, "NatureOfDonation": "Administration services", "Value": 157854.469}, {"Year": 2011, "NatureOfDonation": "Loan conversion", "Value": 50000.0}, {"Year": 2004, "NatureOfDonation": "Auction prizes", "Value": 393212.0}, {"Year": 2014, "NatureOfDonation": "Administration services", "Value": 2984529.0}, {"Year": 2009, "NatureOfDonation": "Travel", "Value": 303865.281}, {"Year": 2021, "NatureOfDonation": "Consultancy services", "Value": 103687.0}, {"Year": 2017, "NatureOfDonation": "Sponsorship", "Value": 224381.063}, {"Year": 2011, "NatureOfDonation": "Hospitality", "Value": 10958.15}, {"Year": 2009, "NatureOfDonation": "Loan conversion", "Value": 17260.148}, {"Year": 2023, "NatureOfDonation": "Auction prizes", "Value": 116407.539}, {"Year": 2001, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 160411.375}, {"Year": 2002, "NatureOfDonation": null, "Value": 16513277.0}, {"Year": 2011, "NatureOfDonation": "Other Payment", "Value": 45352.508}, {"Year": 2020, "NatureOfDonation": "Short Money (House of Commons)", "Value": 9097806.0}, {"Year": 2013, "NatureOfDonation": "Auction prizes", "Value": 267017.188}, {"Year": 2002, "NatureOfDonation": "Start Up Grant (Discontinued)", "Value": 175402.063}, {"Year": 2006, "NatureOfDonation": "Consultancy services", "Value": 500361.0}, {"Year": 2005, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 259402.813}, {"Year": 2015, "NatureOfDonation": "Policy Development Grant", "Value": 1946854.25}, {"Year": 2017, "NatureOfDonation": "Staff costs", "Value": 291320.281}, {"Year": 2021, "NatureOfDonation": "Financial Assistance for Parties in NI Assembly", "Value": 569712.25}, {"Year": 2010, "NatureOfDonation": "Travel", "Value": 184353.438}, {"Year": 2023, "NatureOfDonation": "Policy Development Grant", "Value": 1986335.125}, {"Year": 2013, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6767065.5}, {"Year": 2020, "NatureOfDonation": "Other", "Value": 563743.0}, {"Year": 2018, "NatureOfDonation": "Administration services", "Value": 87653.383}, {"Year": 2004, "NatureOfDonation": "Consultancy services", "Value": 207005.375}, {"Year": 2021, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 916170.75}, {"Year": 2017, "NatureOfDonation": "Premises", "Value": 655267.375}, {"Year": 2019, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 930346.438}, {"Year": 2017, "NatureOfDonation": "Policy Development Grant", "Value": 1483240.625}, {"Year": 2020, "NatureOfDonation": "Sponsorship", "Value": 7000.0}, {"Year": 2004, "NatureOfDonation": null, "Value": 28476582.0}, {"Year": 2014, "NatureOfDonation": "Travel", "Value": 9430.16}, {"Year": 2016, "NatureOfDonation": "Advertising", "Value": 533168.25}, {"Year": 2010, "NatureOfDonation": "Other", "Value": 131178.828}, {"Year": 2007, "NatureOfDonation": "Policy Development Grant", "Value": 1328302.625}, {"Year": 2004, "NatureOfDonation": "Travel", "Value": 89010.25}, {"Year": 2005, "NatureOfDonation": "Loan conversion", "Value": 24110.359}, {"Year": 2011, "NatureOfDonation": "Auction prizes", "Value": 281623.0}, {"Year": 2012, "NatureOfDonation": "Sponsorship", "Value": 391207.344}, {"Year": 2004, "NatureOfDonation": "Premises", "Value": 407108.719}, {"Year": 2003, "NatureOfDonation": "Administration services", "Value": 24000.0}, {"Year": 2013, "NatureOfDonation": "Administration services", "Value": 24000.0}, {"Year": 2016, "NatureOfDonation": "Hospitality", "Value": 21995.0}, {"Year": 2012, "NatureOfDonation": "Auction prizes", "Value": 282574.0}, {"Year": 2021, "NatureOfDonation": "Travel", "Value": 45798.953}, {"Year": 2013, "NatureOfDonation": "Premises", "Value": 212296.984}, {"Year": 2019, "NatureOfDonation": "Short Money (House of Commons)", "Value": 8589595.0}, {"Year": 2016, "NatureOfDonation": "Short Money (House of Commons)", "Value": 8398265.0}, {"Year": 2002, "NatureOfDonation": "Loan conversion", "Value": 7375.89}, {"Year": 2009, "NatureOfDonation": "Advertising", "Value": 1295958.875}, {"Year": 2023, "NatureOfDonation": "Administration services", "Value": 2090686.625}, {"Year": 2001, "NatureOfDonation": "Start Up Grant (Discontinued)", "Value": 179420.938}, {"Year": 2015, "NatureOfDonation": "Travel", "Value": 328225.063}, {"Year": 2023, "NatureOfDonation": "Other Payment", "Value": 2320035.0}, {"Year": 2015, "NatureOfDonation": "Advertising", "Value": 106986.852}, {"Year": 2003, "NatureOfDonation": "Travel", "Value": 95060.469}, {"Year": 2007, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 582721.813}, {"Year": 2002, "NatureOfDonation": "Auction prizes", "Value": 16060.0}, {"Year": 2015, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 450996.938}, {"Year": 2007, "NatureOfDonation": "Auction prizes", "Value": 244394.0}, {"Year": 2010, "NatureOfDonation": "Advertising", "Value": 1095947.0}, {"Year": 2018, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 510747.219}, {"Year": 2023, "NatureOfDonation": "Hospitality", "Value": 138236.25}, {"Year": 2018, "NatureOfDonation": "Sponsorship", "Value": 106356.461}, {"Year": 2001, "NatureOfDonation": "Premises", "Value": 261928.484}, {"Year": 2002, "NatureOfDonation": "Travel", "Value": 46651.379}, {"Year": 2010, "NatureOfDonation": "Sponsorship", "Value": 293908.188}, {"Year": 2016, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 923906.188}, {"Year": 2020, "NatureOfDonation": "Hospitality", "Value": 8750.0}, {"Year": 2008, "NatureOfDonation": "Hospitality", "Value": 56075.18}, {"Year": 2003, "NatureOfDonation": "Advertising", "Value": 263028.5}, {"Year": 2013, "NatureOfDonation": "Sponsorship", "Value": 120835.805}, {"Year": 2015, "NatureOfDonation": "Administration services", "Value": 458636.031}, {"Year": 2021, "NatureOfDonation": "Loan conversion", "Value": 2000.0}, {"Year": 2023, "NatureOfDonation": "Staff costs", "Value": 1071620.875}, {"Year": 2021, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 510127.75}, {"Year": 2010, "NatureOfDonation": "Loan conversion", "Value": 37777.0}, {"Year": 2008, "NatureOfDonation": "Sponsorship", "Value": 438438.156}, {"Year": 2004, "NatureOfDonation": "Sponsorship", "Value": 52229.5}, {"Year": 2005, "NatureOfDonation": "Staff costs", "Value": 474650.031}, {"Year": 2017, "NatureOfDonation": "Consultancy services", "Value": 65744.0}, {"Year": 2013, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 588470.125}, {"Year": 2013, "NatureOfDonation": "Travel", "Value": 8010.0}, {"Year": 2018, "NatureOfDonation": "Short Money (House of Commons)", "Value": 9933542.0}, {"Year": 2022, "NatureOfDonation": "Sponsorship", "Value": 38045.23}, {"Year": 2001, "NatureOfDonation": "Short Money (House of Commons)", "Value": 3261422.0}, {"Year": 2022, "NatureOfDonation": "Travel", "Value": 35374.391}, {"Year": 2016, "NatureOfDonation": "Travel", "Value": 2770.51}, {"Year": 2001, "NatureOfDonation": "Loan conversion", "Value": 104301.375}, {"Year": 2017, "NatureOfDonation": "Advertising", "Value": 470166.063}, {"Year": 2003, "NatureOfDonation": "Hospitality", "Value": 24060.24}, {"Year": 2022, "NatureOfDonation": "Advertising", "Value": 26584.699}, {"Year": 2012, "NatureOfDonation": "Administration services", "Value": 46276.0}, {"Year": 2007, "NatureOfDonation": "Other Payment", "Value": 10652.029}, {"Year": 2001, "NatureOfDonation": "Other Payment", "Value": 257893.297}, {"Year": 2022, "NatureOfDonation": "Consultancy services", "Value": 18544.0}, {"Year": 2014, "NatureOfDonation": null, "Value": 57557248.0}, {"Year": 2021, "NatureOfDonation": "Sponsorship", "Value": 58684.93}, {"Year": 2022, "NatureOfDonation": "Financial Assistance for Parties in NI Assembly", "Value": 619335.188}, {"Year": 2008, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 581312.0}, {"Year": 2006, "NatureOfDonation": "Auction prizes", "Value": 399400.0}, {"Year": 2012, "NatureOfDonation": "Hospitality", "Value": 17055.199}, {"Year": 2002, "NatureOfDonation": "Other", "Value": 13924.51}, {"Year": 2009, "NatureOfDonation": "Premises", "Value": 683918.688}, {"Year": 2010, "NatureOfDonation": "Other Payment", "Value": 12862.63}, {"Year": 2020, "NatureOfDonation": "Financial Assistance for Parties in NI Assembly", "Value": 618749.188}, {"Year": 2017, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 505942.875}, {"Year": 2014, "NatureOfDonation": "Policy Development Grant", "Value": 837124.875}, {"Year": 2011, "NatureOfDonation": "Travel", "Value": 24124.461}, {"Year": 2005, "NatureOfDonation": "Travel", "Value": 388982.906}, {"Year": 2013, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 300995.0}, {"Year": 2020, "NatureOfDonation": "Premises", "Value": 374756.5}, {"Year": 2019, "NatureOfDonation": "Advertising", "Value": 274444.563}, {"Year": 2015, "NatureOfDonation": "Auction prizes", "Value": 1008091.0}, {"Year": 2009, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 737275.625}, {"Year": 2010, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 534427.75}, {"Year": 2017, "NatureOfDonation": "Travel", "Value": 3376.3}, {"Year": 2008, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 703107.375}, {"Year": 2013, "NatureOfDonation": "Consultancy services", "Value": 22020.0}, {"Year": 2008, "NatureOfDonation": "Policy Development Grant", "Value": 1187250.375}, {"Year": 2003, "NatureOfDonation": "Staff costs", "Value": 336387.25}, {"Year": 2019, "NatureOfDonation": "Travel", "Value": 77655.414}, {"Year": 2010, "NatureOfDonation": "Hospitality", "Value": 59162.449}, {"Year": 2012, "NatureOfDonation": "Policy Development Grant", "Value": 1425889.75}, {"Year": 2013, "NatureOfDonation": "Staff costs", "Value": 579144.188}, {"Year": 2021, "NatureOfDonation": null, "Value": 36533592.0}, {"Year": 2010, "NatureOfDonation": "Auction prizes", "Value": 656593.5}, {"Year": 2018, "NatureOfDonation": "Hospitality", "Value": 30009.35}, {"Year": 2007, "NatureOfDonation": "Premises", "Value": 490512.156}, {"Year": 2019, "NatureOfDonation": "Consultancy services", "Value": 93800.0}, {"Year": 2023, "NatureOfDonation": "Other", "Value": 71035.047}, {"Year": 2010, "NatureOfDonation": "Policy Development Grant", "Value": 980481.813}, {"Year": 2018, "NatureOfDonation": "Other Payment", "Value": 10797.01}, {"Year": 2016, "NatureOfDonation": "Staff costs", "Value": 367051.094}, {"Year": 2009, "NatureOfDonation": null, "Value": 45307128.0}, {"Year": 2016, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 510576.594}, {"Year": 2020, "NatureOfDonation": null, "Value": 26591384.0}, {"Year": 2010, "NatureOfDonation": "Administration services", "Value": 29973.0}, {"Year": 2008, "NatureOfDonation": "Administration services", "Value": 25763.0}, {"Year": 2020, "NatureOfDonation": "Other Payment", "Value": 679542.063}, {"Year": 2015, "NatureOfDonation": "Staff costs", "Value": 421450.0}, {"Year": 2019, "NatureOfDonation": "Policy Development Grant", "Value": 1840693.875}, {"Year": 2005, "NatureOfDonation": "Advertising", "Value": 691357.875}, {"Year": 2014, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 445666.25}, {"Year": 2010, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6127833.0}, {"Year": 2009, "NatureOfDonation": "Other", "Value": 114921.281}, {"Year": 2013, "NatureOfDonation": null, "Value": 32171264.0}, {"Year": 2019, "NatureOfDonation": "Administration services", "Value": 120510.203}, {"Year": 2006, "NatureOfDonation": "Policy Development Grant", "Value": 991089.438}, {"Year": 2014, "NatureOfDonation": "Other", "Value": 830431.625}, {"Year": 2005, "NatureOfDonation": "Consultancy services", "Value": 212511.109}, {"Year": 2005, "NatureOfDonation": "Premises", "Value": 516830.625}, {"Year": 2006, "NatureOfDonation": "Travel", "Value": 217341.578}, {"Year": 2019, "NatureOfDonation": "Other", "Value": 252428.156}, {"Year": 2007, "NatureOfDonation": "Other", "Value": 57027.75}, {"Year": 2023, "NatureOfDonation": "Consultancy services", "Value": 112724.281}, {"Year": 2002, "NatureOfDonation": "Other Payment", "Value": 208076.406}, {"Year": 2008, "NatureOfDonation": "Other", "Value": 19417.699}, {"Year": 2001, "NatureOfDonation": "Other", "Value": 16468.551}, {"Year": 2015, "NatureOfDonation": "Other", "Value": 422850.875}, {"Year": 2009, "NatureOfDonation": "Consultancy services", "Value": 928659.688}, {"Year": 2002, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 285934.406}, {"Year": 2006, "NatureOfDonation": "Administration services", "Value": 28463.0}, {"Year": 2006, "NatureOfDonation": "Premises", "Value": 390207.031}, {"Year": 2005, "NatureOfDonation": null, "Value": 41625848.0}, {"Year": 2014, "NatureOfDonation": "Auction prizes", "Value": 529706.0}, {"Year": 2023, "NatureOfDonation": "Sponsorship", "Value": 2493.0}, {"Year": 2014, "NatureOfDonation": "Sponsorship", "Value": 258828.313}, {"Year": 2022, "NatureOfDonation": "Auction prizes", "Value": 236343.828}, {"Year": 2015, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 633808.625}, {"Year": 2010, "NatureOfDonation": "Staff costs", "Value": 800305.25}, {"Year": 2016, "NatureOfDonation": "Premises", "Value": 732555.938}, {"Year": 2020, "NatureOfDonation": "Advertising", "Value": 13009.0}, {"Year": 2006, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 613571.438}, {"Year": 2011, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 307791.688}, {"Year": 2004, "NatureOfDonation": "Administration services", "Value": 28487.35}, {"Year": 2015, "NatureOfDonation": "Premises", "Value": 393301.031}, {"Year": 2023, "NatureOfDonation": "Loan conversion", "Value": 6900.0}, {"Year": 2014, "NatureOfDonation": "Short Money (House of Commons)", "Value": 7075000.0}, {"Year": 2018, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 928588.25}, {"Year": 2009, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 458859.344}, {"Year": 2021, "NatureOfDonation": "Administration services", "Value": 101257.375}, {"Year": 2001, "NatureOfDonation": "Auction prizes", "Value": 8580.0}, {"Year": 2018, "NatureOfDonation": "Other", "Value": 190681.0}, {"Year": 2013, "NatureOfDonation": "Other Payment", "Value": 17738.18}, {"Year": 2004, "NatureOfDonation": "Short Money (House of Commons)", "Value": 4896915.5}, {"Year": 2020, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 495581.125}, {"Year": 2011, "NatureOfDonation": "Advertising", "Value": 12307.4}, {"Year": 2018, "NatureOfDonation": "Consultancy services", "Value": 11133.0}, {"Year": 2011, "NatureOfDonation": "Administration services", "Value": 127212.406}, {"Year": 2012, "NatureOfDonation": "Advertising", "Value": 2400.0}, {"Year": 2001, "NatureOfDonation": "Hospitality", "Value": 4477.25}, {"Year": 2002, "NatureOfDonation": "Premises", "Value": 299984.188}, {"Year": 2004, "NatureOfDonation": "Hospitality", "Value": 31151.32}, {"Year": 2009, "NatureOfDonation": "Sponsorship", "Value": 296500.563}, {"Year": 2017, "NatureOfDonation": "Other Payment", "Value": 90682.688}, {"Year": 2009, "NatureOfDonation": "Hospitality", "Value": 11080.32}, {"Year": 2014, "NatureOfDonation": "Consultancy services", "Value": 588563.188}, {"Year": 2018, "NatureOfDonation": null, "Value": 33336864.0}, {"Year": 2006, "NatureOfDonation": "Staff costs", "Value": 262420.25}, {"Year": 2023, "NatureOfDonation": "Premises", "Value": 268899.625}, {"Year": 2018, "NatureOfDonation": "Travel", "Value": 35285.828}, {"Year": 2012, "NatureOfDonation": "Other", "Value": 505055.813}, {"Year": 2013, "NatureOfDonation": "Other", "Value": 2344686.25}, {"Year": 2001, "NatureOfDonation": "Administration services", "Value": 21000.0}, {"Year": 2007, "NatureOfDonation": "Administration services", "Value": 31553.0}, {"Year": 2022, "NatureOfDonation": "Premises", "Value": 234250.188}, {"Year": 2018, "NatureOfDonation": "Premises", "Value": 321441.5}, {"Year": 2004, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 567035.875}, {"Year": 2011, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6188546.5}, {"Year": 2016, "NatureOfDonation": "Administration services", "Value": 231097.875}, {"Year": 2016, "NatureOfDonation": "Auction prizes", "Value": 441905.125}, {"Year": 2021, "NatureOfDonation": "Other Payment", "Value": 175089.953}, {"Year": 2002, "NatureOfDonation": "Advertising", "Value": 42854.289}, {"Year": 2005, "NatureOfDonation": "Sponsorship", "Value": 82845.383}, {"Year": 2017, "NatureOfDonation": "Financial Assistance for Parties in NI Assembly", "Value": 234600.078}, {"Year": 2006, "NatureOfDonation": null, "Value": 34504868.0}, {"Year": 2009, "NatureOfDonation": "Auction prizes", "Value": 326253.0}, {"Year": 2003, "NatureOfDonation": "Premises", "Value": 399239.406}, {"Year": 2019, "NatureOfDonation": "Financial Assistance for Parties in NI Assembly", "Value": 685654.75}, {"Year": 2006, "NatureOfDonation": "Loan conversion", "Value": 31446.209}, {"Year": 2003, "NatureOfDonation": "Sponsorship", "Value": 69526.125}, {"Year": 2011, "NatureOfDonation": "Other", "Value": 613518.75}, {"Year": 2023, "NatureOfDonation": "Short Money (House of Commons)", "Value": 8502601.0}, {"Year": 2008, "NatureOfDonation": null, "Value": 37574556.0}, {"Year": 2005, "NatureOfDonation": "Hospitality", "Value": 35588.75}, {"Year": 2021, "NatureOfDonation": "Premises", "Value": 95999.289}, {"Year": 2008, "NatureOfDonation": "Advertising", "Value": 537196.0}, {"Year": 2007, "NatureOfDonation": "Sponsorship", "Value": 87213.898}, {"Year": 2021, "NatureOfDonation": "Staff costs", "Value": 672649.125}, {"Year": 2014, "NatureOfDonation": "Premises", "Value": 336666.063}, {"Year": 2005, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 643269.0}, {"Year": 2002, "NatureOfDonation": "Short Money (House of Commons)", "Value": 3633537.25}, {"Year": 2003, "NatureOfDonation": "Auction prizes", "Value": 95511.797}, {"Year": 2019, "NatureOfDonation": "Hospitality", "Value": 24294.551}, {"Year": 2007, "NatureOfDonation": "Advertising", "Value": 390091.875}, {"Year": 2017, "NatureOfDonation": "Other", "Value": 360441.906}, {"Year": 2008, "NatureOfDonation": "Auction prizes", "Value": 490524.938}, {"Year": 2012, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 1029087.375}, {"Year": 2022, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 1136183.875}, {"Year": 2023, "NatureOfDonation": "Travel", "Value": 97681.781}, {"Year": 2017, "NatureOfDonation": "Auction prizes", "Value": 374238.0}, {"Year": 2016, "NatureOfDonation": "Other", "Value": 363030.469}, {"Year": 2001, "NatureOfDonation": "Sponsorship", "Value": 14048.0}, {"Year": 2004, "NatureOfDonation": "Staff costs", "Value": 450805.125}, {"Year": 2020, "NatureOfDonation": "Loan conversion", "Value": 56560.0}, {"Year": 2003, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 341430.406}, {"Year": 2020, "NatureOfDonation": "Policy Development Grant", "Value": 2066270.5}, {"Year": 2015, "NatureOfDonation": null, "Value": 63543392.0}, {"Year": 2018, "NatureOfDonation": "Financial Assistance for Parties in NI Assembly", "Value": 690237.25}, {"Year": 2010, "NatureOfDonation": null, "Value": 56842952.0}, {"Year": 2010, "NatureOfDonation": "Premises", "Value": 482595.094}, {"Year": 2007, "NatureOfDonation": "Hospitality", "Value": 16830.0}, {"Year": 2022, "NatureOfDonation": "Loan conversion", "Value": 4000.0}, {"Year": 2001, "NatureOfDonation": "Consultancy services", "Value": 47800.0}, {"Year": 2005, "NatureOfDonation": "Administration services", "Value": 30483.5}, {"Year": 2002, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 275309.0}, {"Year": 2020, "NatureOfDonation": "Consultancy services", "Value": 211584.328}, {"Year": 2006, "NatureOfDonation": "Advertising", "Value": 259956.969}, {"Year": 2001, "NatureOfDonation": "Staff costs", "Value": 113710.906}, {"Year": 2016, "NatureOfDonation": null, "Value": 39076352.0}, {"Year": 2008, "NatureOfDonation": "Staff costs", "Value": 537006.25}, {"Year": 2006, "NatureOfDonation": "Sponsorship", "Value": 85433.477}, {"Year": 2014, "NatureOfDonation": "Hospitality", "Value": 33575.66}, {"Year": 2023, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 557274.5}, {"Year": 2004, "NatureOfDonation": "Advertising", "Value": 1904308.625}, {"Year": 2018, "NatureOfDonation": "Advertising", "Value": 192329.344}, {"Year": 2021, "NatureOfDonation": "Advertising", "Value": 159576.422}, {"Year": 2015, "NatureOfDonation": "Short Money (House of Commons)", "Value": 7128179.5}, {"Year": 2007, "NatureOfDonation": null, "Value": 44354568.0}, {"Year": 2003, "NatureOfDonation": "Consultancy services", "Value": 67373.688}, {"Year": 2022, "NatureOfDonation": "Hospitality", "Value": 58087.824}, {"Year": 2020, "NatureOfDonation": "Administration services", "Value": 24660.639}, {"Year": 2002, "NatureOfDonation": "Hospitality", "Value": 5125.0}, {"Year": 2002, "NatureOfDonation": "Consultancy services", "Value": 1122.5}, {"Year": 2010, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 500468.094}, {"Year": 2008, "NatureOfDonation": "Premises", "Value": 647458.875}, {"Year": 2012, "NatureOfDonation": "Staff costs", "Value": 768487.813}, {"Year": 2007, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6385244.0}, {"Year": 2012, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6041495.0}, {"Year": 2015, "NatureOfDonation": "Hospitality", "Value": 2724.0}, {"Year": 2008, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6585557.0}, {"Year": 2001, "NatureOfDonation": "Advertising", "Value": 672794.313}, {"Year": 2019, "NatureOfDonation": "Sponsorship", "Value": 39858.918}, {"Year": 2007, "NatureOfDonation": "Travel", "Value": 131769.5}, {"Year": 2022, "NatureOfDonation": "Other Payment", "Value": 138248.438}, {"Year": 2022, "NatureOfDonation": "Administration services", "Value": 133599.141}, {"Year": 2020, "NatureOfDonation": "Auction prizes", "Value": 149500.0}, {"Year": 2013, "NatureOfDonation": "Hospitality", "Value": 32447.0}, {"Year": 2017, "NatureOfDonation": null, "Value": 60184896.0}, {"Year": 2016, "NatureOfDonation": "Policy Development Grant", "Value": 1034120.063}, {"Year": 2020, "NatureOfDonation": "Staff costs", "Value": 254091.797}, {"Year": 2017, "NatureOfDonation": "Hospitality", "Value": 34932.07}, {"Year": 2022, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 489039.906}, {"Year": 2022, "NatureOfDonation": null, "Value": 36984484.0}, {"Year": 2006, "NatureOfDonation": "Other", "Value": 55066.828}, {"Year": 2005, "NatureOfDonation": "Auction prizes", "Value": 150144.0}, {"Year": 2023, "NatureOfDonation": "Financial Assistance for Parties in NI Assembly", "Value": 640083.688}, {"Year": 2022, "NatureOfDonation": "Short Money (House of Commons)", "Value": 9456812.0}, {"Year": 2009, "NatureOfDonation": "Administration services", "Value": 36455.0}, {"Year": 2005, "NatureOfDonation": "Short Money (House of Commons)", "Value": 5805469.5}, {"Year": 2011, "NatureOfDonation": null, "Value": 32560900.0}, {"Year": 2006, "NatureOfDonation": "Hospitality", "Value": 34139.59}, {"Year": 2011, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 548751.813}, {"Year": 2012, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 304216.5}, {"Year": 2021, "NatureOfDonation": "Short Money (House of Commons)", "Value": 8971404.0}, {"Year": 2004, "NatureOfDonation": "Other", "Value": 20781.73}, {"Year": 2008, "NatureOfDonation": "Consultancy services", "Value": 1839191.125}, {"Year": 2018, "NatureOfDonation": "Auction prizes", "Value": 194281.0}, {"Year": 2020, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 939722.688}, {"Year": 2007, "NatureOfDonation": "Consultancy services", "Value": 1632195.625}, {"Year": 2019, "NatureOfDonation": "Staff costs", "Value": 501143.313}, {"Year": 2012, "NatureOfDonation": "Premises", "Value": 277502.281}, {"Year": 2006, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6111056.0}, {"Year": 2012, "NatureOfDonation": null, "Value": 28865024.0}, {"Year": 2003, "NatureOfDonation": null, "Value": 21093400.0}, {"Year": 2019, "NatureOfDonation": "Auction prizes", "Value": 224980.0}, {"Year": 2014, "NatureOfDonation": "Advertising", "Value": 1529097.875}, {"Year": 2017, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 882561.25}, {"Year": 2019, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 533320.563}, {"Year": 2001, "NatureOfDonation": "Travel", "Value": 584593.563}, {"Year": 2021, "NatureOfDonation": "Auction prizes", "Value": 165615.0}, {"Year": 2008, "NatureOfDonation": "Travel", "Value": 136799.734}, {"Year": 2003, "NatureOfDonation": "Loan conversion", "Value": 28085.33}, {"Year": 2009, "NatureOfDonation": "Short Money (House of Commons)", "Value": 6590613.5}, {"Year": 2022, "NatureOfDonation": "Staff costs", "Value": 591797.813}, {"Year": 2011, "NatureOfDonation": "Policy Development Grant", "Value": 2029761.25}, {"Year": 2009, "NatureOfDonation": "Policy Development Grant", "Value": 1514922.875}, {"Year": 2002, "NatureOfDonation": "Staff costs", "Value": 209218.641}, {"Year": 2014, "NatureOfDonation": "Staff costs", "Value": 1328156.25}, {"Year": 2007, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 285501.594}, {"Year": 2001, "NatureOfDonation": null, "Value": 26276198.0}, {"Year": 2023, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 960125.813}, {"Year": 2021, "NatureOfDonation": "Policy Development Grant", "Value": 1934232.5}, {"Year": 2022, "NatureOfDonation": "Policy Development Grant", "Value": 1921176.25}, {"Year": 2004, "NatureOfDonation": "Loan conversion", "Value": 3559.47}, {"Year": 2011, "NatureOfDonation": "Sponsorship", "Value": 186037.203}, {"Year": 2017, "NatureOfDonation": "Short Money (House of Commons)", "Value": 8370744.5}, {"Year": 2009, "NatureOfDonation": "Staff costs", "Value": 1195350.5}, {"Year": 2007, "NatureOfDonation": "Staff costs", "Value": 579342.75}, {"Year": 2023, "NatureOfDonation": "Advertising", "Value": 17187.82}, {"Year": 2005, "NatureOfDonation": "Other", "Value": 20772.4}, {"Year": 2015, "NatureOfDonation": "Sponsorship", "Value": 361640.625}, {"Year": 2021, "NatureOfDonation": "Other", "Value": 207205.563}, {"Year": 2011, "NatureOfDonation": "Staff costs", "Value": 547706.563}, {"Year": 2004, "NatureOfDonation": "Assistance for Parties (Scottish Parliament)", "Value": 239252.953}, {"Year": 2013, "NatureOfDonation": "Policy Development Grant", "Value": 1725929.25}, {"Year": 2015, "NatureOfDonation": "Consultancy services", "Value": 268021.813}, {"Year": 2018, "NatureOfDonation": "Policy Development Grant", "Value": 1478260.5}, {"Year": 2010, "NatureOfDonation": "Consultancy services", "Value": 705178.625}, {"Year": 2016, "NatureOfDonation": "Sponsorship", "Value": 113096.703}, {"Year": 2014, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 587914.75}, {"Year": 2003, "NatureOfDonation": "Cranborne Money (House of Lords)", "Value": 668094.875}]}, {"name": "source_0_x_domain_Year", "values": [{"min": 2001, "max": 2023}]}, {"name": "source_0_y_domain_Value", "values": [{"min": 1122.5, "max": 103062304.0}]}, {"name": "source_0_color_domain_NatureOfDonation", "values": [{"NatureOfDonation": null}, {"NatureOfDonation": "Staff costs"}, {"NatureOfDonation": "Other"}, {"NatureOfDonation": "Assistance for Parties (Scottish Parliament)"}, {"NatureOfDonation": "Advertising"}, {"NatureOfDonation": "Premises"}, {"NatureOfDonation": "Consultancy services"}, {"NatureOfDonation": "Administration services"}, {"NatureOfDonation": "Hospitality"}, {"NatureOfDonation": "Short Money (House of Commons)"}, {"NatureOfDonation": "Loan conversion"}, {"NatureOfDonation": "Auction prizes"}, {"NatureOfDonation": "Travel"}, {"NatureOfDonation": "Sponsorship"}, {"NatureOfDonation": "Other Payment"}, {"NatureOfDonation": "Start Up Grant (Discontinued)"}, {"NatureOfDonation": "Policy Development Grant"}, {"NatureOfDonation": "Financial Assistance for Parties in NI Assembly"}, {"NatureOfDonation": "Cranborne Money (House of Lords)"}]}], "signals": [{"name": "width", "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 300", "on": [{"events": "window:resize", "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 300"}]}, {"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_7", "update": "vlSelectionResolve(\"param_7_store\", \"union\")"}, {"name": "param_7_Year", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_7_translate_delta"}, "update": "panLinear(param_7_translate_anchor.extent_x, -param_7_translate_delta.x / width)"}, {"events": {"signal": "param_7_zoom_delta"}, "update": "zoomLinear(domain(\"x\"), param_7_zoom_anchor.x, param_7_zoom_delta)"}]}, {"name": "param_7_Value", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_7_translate_delta"}, "update": "panLinear(param_7_translate_anchor.extent_y, param_7_translate_delta.y / height)"}, {"events": {"signal": "param_7_zoom_delta"}, "update": "zoomLinear(domain(\"y\"), param_7_zoom_anchor.y, param_7_zoom_delta)"}]}, {"name": "param_7_tuple", "on": [{"events": [{"signal": "param_7_Year || param_7_Value"}], "update": "param_7_Year && param_7_Value ? {unit: \"\", fields: param_7_tuple_fields, values: [param_7_Year,param_7_Value]} : null"}]}, {"name": "param_7_tuple_fields", "value": [{"field": "Year", "channel": "x", "type": "R"}, {"field": "Value", "channel": "y", "type": "R"}]}, {"name": "param_7_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: domain(\"x\"), extent_y: domain(\"y\")}"}]}, {"name": "param_7_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}], "update": "{x: param_7_translate_anchor.x - x(unit), y: param_7_translate_anchor.y - y(unit)}"}]}, {"name": "param_7_zoom_anchor", "on": [{"events": [{"source": "scope", "consume": true, "type": "wheel"}], "update": "{x: invert(\"x\", x(unit)), y: invert(\"y\", y(unit))}"}]}, {"name": "param_7_zoom_delta", "on": [{"events": [{"source": "scope", "type": "wheel", "consume": true}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_7_modify", "on": [{"events": {"signal": "param_7_tuple"}, "update": "modify(\"param_7_store\", param_7_tuple, true)"}]}], "marks": [{"type": "group", "name": "pathgroup", "from": {"facet": {"data": "source_0", "name": "faceted_path_main", "groupby": ["NatureOfDonation"]}}, "encode": {"update": {"width": {"field": {"signal": null, "datum": null, "group": "width", "parent": null}}, "height": {"field": {"signal": null, "datum": null, "group": "height", "parent": null}}}}, "marks": [{"type": "line", "name": "marks", "from": {"data": "faceted_path_main"}, "sort": {"field": "x"}, "encode": {"update": {"stroke": {"field": "NatureOfDonation", "scale": "color"}, "tooltip": {"signal": "{\"Year\": format(datum[\"Year\"], \"\"), \"Value\": format(datum[\"Value\"], \"\"), \"NatureOfDonation\": isValid(datum[\"NatureOfDonation\"]) ? datum[\"NatureOfDonation\"] : \"\"+datum[\"NatureOfDonation\"]}"}, "x": {"field": "Year", "scale": "x"}, "defined": {"signal": "isValid(datum[\"Year\"]) && isFinite(+datum[\"Year\"]) && isValid(datum[\"Value\"]) && isFinite(+datum[\"Value\"])"}, "y": {"field": "Value", "scale": "y"}}}, "style": ["line"], "clip": true, "interactive": true}]}], "scales": [{"name": "x", "type": "linear", "domain": [{"signal": "(data(\"source_0_x_domain_Year\")[0] || {}).min"}, {"signal": "(data(\"source_0_x_domain_Year\")[0] || {}).max"}], "range": [0, {"signal": "width"}], "domainRaw": {"signal": "param_7[\"Year\"]"}, "nice": true, "zero": false}, {"name": "y", "type": "linear", "domain": [{"signal": "(data(\"source_0_y_domain_Value\")[0] || {}).min"}, {"signal": "(data(\"source_0_y_domain_Value\")[0] || {}).max"}], "range": [{"signal": "height"}, 0], "zero": true, "nice": true, "domainRaw": {"signal": "param_7[\"Value\"]"}}, {"name": "color", "type": "ordinal", "domain": {"data": "source_0_color_domain_NatureOfDonation", "field": "NatureOfDonation", "sort": true}, "range": "category"}], "axes": [{"scale": "x", "aria": false, "grid": true, "domain": false, "ticks": false, "labels": false, "tickCount": {"signal": "ceil(width/40)"}, "orient": "bottom", "maxExtent": 0, "minExtent": 0, "zindex": 0, "gridScale": "y"}, {"scale": "y", "grid": true, "zindex": 0, "maxExtent": 0, "gridScale": "x", "domain": false, "tickCount": {"signal": "ceil(height/40)"}, "labels": false, "aria": false, "orient": "left", "minExtent": 0, "ticks": false}, {"scale": "x", "zindex": 0, "tickCount": {"signal": "ceil(width/40)"}, "labelFlush": true, "grid": false, "title": "Year", "orient": "bottom", "labelOverlap": true}, {"scale": "y", "title": "Value", "orient": "left", "tickCount": {"signal": "ceil(height/40)"}, "grid": false, "zindex": 0, "labelOverlap": true}], "style": "cell", "autosize": {"type": "fit-x", "contains": "padding"}, "padding": 5, "height": 300, "legends": [{"stroke": "color", "symbolType": "stroke", "title": "NatureOfDonation"}], "background": "white"}, {"mode": "vega"});
</script>
</div>
</div>
<p>There’s a field “NatureOfDonation” in the dataset. There are a few kinds of state funding in here that don’t tell us anything about who is donating to the parties, so we can ignore those.</p>
<ul>
<li>Short money: money given to opposition parties in the House of Commons</li>
<li>Cranbourne money: money given to opposition parties in the House of Lords</li>
<li>Assistance for Parties (Scottish Parliament): money given to parties in the Scottish Parliament</li>
<li>Financial Assistance for Parties in NI Assembly</li>
<li>Policy development grant</li>
</ul>
<p>The main thing to take away is that most of the money doesn’t have a “NatureOfDonation”. There’s also “DonationType”</p>
<div id="199b71a6" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>donations.<span class="bu">filter</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"NatureOfDonation"</span>).is_null()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>).select(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"DonationType"</span>, <span class="st">"Value"</span>]</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>).group_by(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DonationType"</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>).agg(</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  count<span class="op">=</span>pl.<span class="bu">len</span>(),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  TotalValue<span class="op">=</span>pl.<span class="bu">sum</span>(<span class="st">"Value"</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (4, 3)</small>
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">DonationType</th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">TotalValue</th>
</tr>
<tr class="odd">
<th>str</th>
<th>u32</th>
<th>f32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"Cash"</td>
<td>58778</td>
<td>9.73968896e8</td>
</tr>
<tr class="even">
<td>"Exempt Trust"</td>
<td>435</td>
<td>3.6146e6</td>
</tr>
<tr class="odd">
<td>"Visit"</td>
<td>19</td>
<td>276699.15625</td>
</tr>
<tr class="even">
<td>"Permissible Donor Exempt Trust"</td>
<td>51</td>
<td>447430.65625</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>That seems more important to us. I’m unclear on what “Visit” is, but the value is low, so I’ll leave it in. “Cash” is obvious (and something we care about). The other two are types of bequest left in a will.</p>
<p>Donations look broadly the same if we filter out the state funding.</p>
<div id="2350d133" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>selected_donations <span class="op">=</span> donations.with_columns(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"AcceptedDate"</span>).dt.year().alias(<span class="st">"Year"</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"NatureOfDonation"</span>).fill_null(strategy<span class="op">=</span><span class="st">"zero"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>).select(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"DonationType"</span>, <span class="st">"NatureOfDonation"</span>, <span class="st">"Value"</span>, <span class="st">"Year"</span>, <span class="st">"RegulatedEntityName"</span>]</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  [</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"NatureOfDonation"</span>).is_in(</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>      [</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Assistance for Parties (Scottish Parliament)"</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cranborne Money (House of Lords)"</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Financial Assistance for Parties in NI Assembly"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Policy Development Grant"</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Short Money (House of Commons)"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Start Up Grant (Discontinued)"</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    ).not_(),</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"RegulatedEntityName"</span>).is_in(main_parties)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="9092d3ad" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>selected_donations_3 <span class="op">=</span> selected_donations.<span class="bu">filter</span>(pl.col(<span class="st">"RegulatedEntityName"</span>) <span class="op">!=</span> <span class="st">"Reform UK"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>line_selected_donations_3 <span class="op">=</span> alt.Chart(selected_donations_3).mark_line().encode(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="st">'median(Value)'</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span>alt.Color(<span class="st">"RegulatedEntityName"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>main_parties[:<span class="op">-</span><span class="dv">1</span>], <span class="bu">range</span><span class="op">=</span>party_colours[:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="st">"container"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>band_selected_donations_3 <span class="op">=</span> alt.Chart(selected_donations_3).mark_errorband(extent<span class="op">=</span><span class="st">'iqr'</span>).encode(</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span>alt.Y(<span class="st">'Value'</span>).title(<span class="st">'Median Value (£)'</span>),</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span>alt.Color(<span class="st">"RegulatedEntityName"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>main_parties[:<span class="op">-</span><span class="dv">1</span>], <span class="bu">range</span><span class="op">=</span>party_colours[:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>band_selected_donations_3 <span class="op">+</span> line_selected_donations_3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="30">

<style>
  #altair-viz-7186b03106024813b4a6bb21d30b68e6.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7186b03106024813b4a6bb21d30b68e6.vega-embed details,
  #altair-viz-7186b03106024813b4a6bb21d30b68e6.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7186b03106024813b4a6bb21d30b68e6"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7186b03106024813b4a6bb21d30b68e6") {
      outputDiv = document.getElementById("altair-viz-7186b03106024813b4a6bb21d30b68e6");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "source_0"}, {"name": "data_0", "values": [{"RegulatedEntityName": "Labour Party", "Year": 2023, "lower_Value": 1875.0, "upper_Value": 13562.650390625, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2023, "lower_Value": 1000.0, "upper_Value": 5000.0, "center_Value": 2455.9}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2023, "lower_Value": 2260.0, "upper_Value": 11300.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2022, "lower_Value": 2000.0, "upper_Value": 15000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2022, "lower_Value": 1500.0, "upper_Value": 11000.0, "center_Value": 4000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2022, "lower_Value": 1000.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2021, "lower_Value": 833.3400268554688, "upper_Value": 3100.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2021, "lower_Value": 1364.0, "upper_Value": 10000.0, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2021, "lower_Value": 2000.0, "upper_Value": 14000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2020, "lower_Value": 750.0, "upper_Value": 2693.68505859375, "center_Value": 1121.435}, {"RegulatedEntityName": "Labour Party", "Year": 2020, "lower_Value": 1378.9849853515625, "upper_Value": 10000.0, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2020, "lower_Value": 2060.0, "upper_Value": 14500.0, "center_Value": 8000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2019, "lower_Value": 2000.0, "upper_Value": 10000.0, "center_Value": 3495.3}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2019, "lower_Value": 2500.0, "upper_Value": 10522.5, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2019, "lower_Value": 2000.0, "upper_Value": 7000.0, "center_Value": 3515.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2018, "lower_Value": 2000.0, "upper_Value": 6980.0, "center_Value": 3000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2018, "lower_Value": 2230.5250244140625, "upper_Value": 9225.0, "center_Value": 4000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2018, "lower_Value": 3000.0, "upper_Value": 18702.5, "center_Value": 8000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2017, "lower_Value": 1839.75, "upper_Value": 5000.0, "center_Value": 2590.0}, {"RegulatedEntityName": "Labour Party", "Year": 2017, "lower_Value": 1625.0, "upper_Value": 5000.0, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2017, "lower_Value": 2499.7424926757812, "upper_Value": 10346.590087890625, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2016, "lower_Value": 1494.0, "upper_Value": 8400.0, "center_Value": 3000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2016, "lower_Value": 1800.0, "upper_Value": 4586.5, "center_Value": 2250.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2016, "lower_Value": 3000.0, "upper_Value": 20250.0, "center_Value": 9000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2015, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2015, "lower_Value": 1299.0, "upper_Value": 5008.1500244140625, "center_Value": 2500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2015, "lower_Value": 2500.0, "upper_Value": 10000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2014, "lower_Value": 1800.0, "upper_Value": 5000.0, "center_Value": 2400.0}, {"RegulatedEntityName": "Labour Party", "Year": 2014, "lower_Value": 1500.030029296875, "upper_Value": 8000.0, "center_Value": 3000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2014, "lower_Value": 2500.0, "upper_Value": 12249.849609375, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2013, "lower_Value": 1738.9349670410156, "upper_Value": 4339.0, "center_Value": 2184.0}, {"RegulatedEntityName": "Labour Party", "Year": 2013, "lower_Value": 1225.8174743652344, "upper_Value": 9000.0, "center_Value": 2443.69}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2013, "lower_Value": 2500.0, "upper_Value": 12550.0, "center_Value": 6000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2012, "lower_Value": 1761.5, "upper_Value": 3016.1599731445312, "center_Value": 2000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2012, "lower_Value": 2500.0, "upper_Value": 20000.0, "center_Value": 8500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2012, "lower_Value": 1118.75, "upper_Value": 7004.4150390625, "center_Value": 2245.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2011, "lower_Value": 1621.7100219726562, "upper_Value": 3200.0, "center_Value": 2040.0}, {"RegulatedEntityName": "Labour Party", "Year": 2011, "lower_Value": 1155.0, "upper_Value": 5200.0, "center_Value": 2100.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2011, "lower_Value": 2650.0, "upper_Value": 20000.0, "center_Value": 8500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2010, "lower_Value": 1200.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2010, "lower_Value": 1743.0, "upper_Value": 4225.0, "center_Value": 2200.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2010, "lower_Value": 2500.0, "upper_Value": 13000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2009, "lower_Value": 2000.0, "upper_Value": 10589.125, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2009, "lower_Value": 1100.0, "upper_Value": 2475.0, "center_Value": 1380.0}, {"RegulatedEntityName": "Labour Party", "Year": 2009, "lower_Value": 600.0, "upper_Value": 3750.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2008, "lower_Value": 1120.0, "upper_Value": 2500.0, "center_Value": 1397.48}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2008, "lower_Value": 2000.0, "upper_Value": 12500.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2008, "lower_Value": 550.0, "upper_Value": 4000.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2007, "lower_Value": 600.0, "upper_Value": 3800.0, "center_Value": 1400.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2007, "lower_Value": 2000.0, "upper_Value": 12500.0, "center_Value": 5195.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2007, "lower_Value": 1192.0, "upper_Value": 3000.0, "center_Value": 1540.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2006, "lower_Value": 1687.5, "upper_Value": 10000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2006, "lower_Value": 1200.0, "upper_Value": 2495.9300537109375, "center_Value": 1500.0}, {"RegulatedEntityName": "Labour Party", "Year": 2006, "lower_Value": 650.0, "upper_Value": 3822.125, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2005, "lower_Value": 1200.0, "upper_Value": 3000.0, "center_Value": 1693.0}, {"RegulatedEntityName": "Labour Party", "Year": 2005, "lower_Value": 1000.0, "upper_Value": 4000.0, "center_Value": 1800.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2005, "lower_Value": 1600.0, "upper_Value": 7969.800048828125, "center_Value": 3228.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2004, "lower_Value": 1610.3299560546875, "upper_Value": 10000.0, "center_Value": 5000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2004, "lower_Value": 700.0, "upper_Value": 4500.0, "center_Value": 1691.5}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2004, "lower_Value": 1200.0, "upper_Value": 3551.1074829101562, "center_Value": 1668.17}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2003, "lower_Value": 1200.0, "upper_Value": 2500.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2003, "lower_Value": 1500.0, "upper_Value": 10000.0, "center_Value": 4000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2003, "lower_Value": 884.0, "upper_Value": 6000.0, "center_Value": 1925.0}, {"RegulatedEntityName": "Labour Party", "Year": 2002, "lower_Value": 500.0, "upper_Value": 5000.0, "center_Value": 2000.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2002, "lower_Value": 1529.989990234375, "upper_Value": 10000.0, "center_Value": 4000.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2002, "lower_Value": 1104.8250122070312, "upper_Value": 2175.0, "center_Value": 1500.0}, {"RegulatedEntityName": "Liberal Democrats", "Year": 2001, "lower_Value": 1155.9000244140625, "upper_Value": 3056.27001953125, "center_Value": 1607.0}, {"RegulatedEntityName": "Conservative and Unionist Party", "Year": 2001, "lower_Value": 1958.5, "upper_Value": 8875.0, "center_Value": 4000.0}, {"RegulatedEntityName": "Labour Party", "Year": 2001, "lower_Value": 1000.0, "upper_Value": 4054.0, "center_Value": 2000.0}]}, {"name": "data_1", "values": [{"Year": 2023, "RegulatedEntityName": "Labour Party", "median_Value": 5000.0}, {"Year": 2023, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2455.9}, {"Year": 2023, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2022, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2022, "RegulatedEntityName": "Labour Party", "median_Value": 4000.0}, {"Year": 2022, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2000.0}, {"Year": 2021, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2021, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2021, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2020, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1121.435}, {"Year": 2020, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2020, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8000.0}, {"Year": 2019, "RegulatedEntityName": "Liberal Democrats", "median_Value": 3495.3}, {"Year": 2019, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2019, "RegulatedEntityName": "Labour Party", "median_Value": 3515.0}, {"Year": 2018, "RegulatedEntityName": "Liberal Democrats", "median_Value": 3000.0}, {"Year": 2018, "RegulatedEntityName": "Labour Party", "median_Value": 4000.0}, {"Year": 2018, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8000.0}, {"Year": 2017, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2590.0}, {"Year": 2017, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2017, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2016, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2016, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2250.0}, {"Year": 2016, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 9000.0}, {"Year": 2015, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2500.0}, {"Year": 2015, "RegulatedEntityName": "Labour Party", "median_Value": 2500.0}, {"Year": 2015, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2014, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2400.0}, {"Year": 2014, "RegulatedEntityName": "Labour Party", "median_Value": 3000.0}, {"Year": 2014, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2013, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2184.0}, {"Year": 2013, "RegulatedEntityName": "Labour Party", "median_Value": 2443.69}, {"Year": 2013, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 6000.0}, {"Year": 2012, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2000.0}, {"Year": 2012, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8500.0}, {"Year": 2012, "RegulatedEntityName": "Labour Party", "median_Value": 2245.0}, {"Year": 2011, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2040.0}, {"Year": 2011, "RegulatedEntityName": "Labour Party", "median_Value": 2100.0}, {"Year": 2011, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 8500.0}, {"Year": 2010, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}, {"Year": 2010, "RegulatedEntityName": "Liberal Democrats", "median_Value": 2200.0}, {"Year": 2010, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2009, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2009, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1380.0}, {"Year": 2009, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2008, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1397.48}, {"Year": 2008, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2008, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2007, "RegulatedEntityName": "Labour Party", "median_Value": 1400.0}, {"Year": 2007, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5195.0}, {"Year": 2007, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1540.0}, {"Year": 2006, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2006, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2006, "RegulatedEntityName": "Labour Party", "median_Value": 1500.0}, {"Year": 2005, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1693.0}, {"Year": 2005, "RegulatedEntityName": "Labour Party", "median_Value": 1800.0}, {"Year": 2005, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 3228.0}, {"Year": 2004, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 5000.0}, {"Year": 2004, "RegulatedEntityName": "Labour Party", "median_Value": 1691.5}, {"Year": 2004, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1668.17}, {"Year": 2003, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2003, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4000.0}, {"Year": 2003, "RegulatedEntityName": "Labour Party", "median_Value": 1925.0}, {"Year": 2002, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}, {"Year": 2002, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4000.0}, {"Year": 2002, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1500.0}, {"Year": 2001, "RegulatedEntityName": "Liberal Democrats", "median_Value": 1607.0}, {"Year": 2001, "RegulatedEntityName": "Conservative and Unionist Party", "median_Value": 4000.0}, {"Year": 2001, "RegulatedEntityName": "Labour Party", "median_Value": 2000.0}]}], "signals": [{"name": "width", "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 300", "on": [{"events": "window:resize", "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 300"}]}], "marks": [{"type": "group", "name": "layer_0_layer_0_pathgroup", "from": {"facet": {"data": "data_0", "name": "faceted_path_layer_0_layer_0_main", "groupby": ["RegulatedEntityName"]}}, "encode": {"update": {"width": {"field": {"signal": null, "datum": null, "group": "width", "parent": null}}, "height": {"field": {"signal": null, "datum": null, "group": "height", "parent": null}}}}, "marks": [{"type": "area", "name": "layer_0_layer_0_marks", "from": {"data": "faceted_path_layer_0_layer_0_main"}, "sort": {"field": "x"}, "encode": {"update": {"fill": {"field": "RegulatedEntityName", "scale": "color"}, "y2": {"field": "upper_Value", "scale": "y"}, "tooltip": {"signal": "{\"Q3 of Value\": format(datum[\"upper_Value\"], \"\"), \"Q1 of Value\": format(datum[\"lower_Value\"], \"\"), \"Median of Value\": format(datum[\"center_Value\"], \"\"), \"RegulatedEntityName\": isValid(datum[\"RegulatedEntityName\"]) ? datum[\"RegulatedEntityName\"] : \"\"+datum[\"RegulatedEntityName\"], \"Year\": format(datum[\"Year\"], \"\")}"}, "x": {"field": "Year", "scale": "x"}, "opacity": {"value": 0.3}, "orient": {"value": "vertical"}, "y": {"field": "lower_Value", "scale": "y"}, "defined": {"signal": "isValid(datum[\"Year\"]) && isFinite(+datum[\"Year\"]) && isValid(datum[\"lower_Value\"]) && isFinite(+datum[\"lower_Value\"])"}}}, "style": ["area", "errorband-band"]}]}, {"type": "group", "name": "layer_1_pathgroup", "from": {"facet": {"data": "data_1", "name": "faceted_path_layer_1_main", "groupby": ["RegulatedEntityName"]}}, "encode": {"update": {"width": {"field": {"signal": null, "datum": null, "group": "width", "parent": null}}, "height": {"field": {"signal": null, "datum": null, "group": "height", "parent": null}}}}, "marks": [{"type": "line", "name": "layer_1_marks", "from": {"data": "faceted_path_layer_1_main"}, "sort": {"field": "x"}, "encode": {"update": {"y": {"field": "median_Value", "scale": "y"}, "stroke": {"field": "RegulatedEntityName", "scale": "color"}, "defined": {"signal": "isValid(datum[\"Year\"]) && isFinite(+datum[\"Year\"]) && isValid(datum[\"median_Value\"]) && isFinite(+datum[\"median_Value\"])"}, "x": {"field": "Year", "scale": "x"}}}, "style": ["line"]}]}], "scales": [{"name": "x", "type": "linear", "domain": {"fields": [{"data": "data_0", "field": "Year"}, {"data": "data_1", "field": "Year"}]}, "range": [0, {"signal": "width"}], "nice": true, "zero": false}, {"name": "y", "type": "linear", "domain": {"fields": [{"data": "data_0", "field": "lower_Value"}, {"data": "data_0", "field": "upper_Value"}, {"data": "data_1", "field": "median_Value"}]}, "range": [{"signal": "height"}, 0], "nice": true, "zero": true}, {"name": "color", "type": "ordinal", "domain": ["Labour Party", "Conservative and Unionist Party", "Liberal Democrats"], "range": ["#d50000", "#0087dc", "#FDBB30"]}], "axes": [{"scale": "x", "orient": "bottom", "tickCount": {"signal": "ceil(width/40)"}, "domain": false, "gridScale": "y", "minExtent": 0, "ticks": false, "zindex": 0, "labels": false, "grid": true, "maxExtent": 0, "aria": false}, {"scale": "y", "grid": true, "gridScale": "x", "minExtent": 0, "maxExtent": 0, "orient": "left", "tickCount": {"signal": "ceil(height/40)"}, "domain": false, "zindex": 0, "ticks": false, "aria": false, "labels": false}, {"scale": "x", "title": "Year", "tickCount": {"signal": "ceil(width/40)"}, "orient": "bottom", "zindex": 0, "grid": false, "labelFlush": true, "labelOverlap": true}, {"scale": "y", "orient": "left", "zindex": 0, "grid": false, "title": "Median Value (\u00a3)", "labelOverlap": true, "tickCount": {"signal": "ceil(height/40)"}}], "autosize": {"type": "fit-x", "contains": "padding"}, "height": 300, "style": "cell", "background": "white", "legends": [{"fill": "color", "symbolType": "circle", "title": "RegulatedEntityName", "encode": {"symbols": {"update": {"opacity": {"value": 0.3}}}}, "stroke": "color"}], "padding": 5}, {"mode": "vega"});
</script>
</div>
</div>
<p>OK, so much for the how the value of donations is distributed. It’s quite interesting that the Conservatives have received a fairly similar distribution of donations, except in election years, where the median value (and total) spikes. The exception is the last election cycle.</p>
<p>Meanwhile, Labour and the Liberal Democrats have had a similar distribution (though different total value) to one another until the last election cycle, where Labour’s donations have steadily increased, and the Liberal Democrats’ have dropped.</p>
</section>
<section id="the-donors" class="level2">
<h2 class="anchored" data-anchor-id="the-donors">The Donors</h2>
<p>Now, who is giving all this money? Here are the top 10 donors:</p>
<div id="d9698c86" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>who_donations <span class="op">=</span> donations.select(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  pl.exclude([<span class="st">"AccountingUnitId"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">"AccountingUnitName"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">"AccountingUnitsAsCentralParty"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">"IsSponsorship"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>              <span class="st">"RegulatedDoneeType"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">"IsReportedPrePoll"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">"IsBequest"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">"IsAggregation"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">"RegulatedEntityId"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>              <span class="st">"CampaigningName"</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>              <span class="st">"IsIrishSource"</span>])</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>).with_columns(</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"NatureOfDonation"</span>).fill_null(strategy<span class="op">=</span><span class="st">"zero"</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"NatureOfDonation"</span>).is_in(</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>      [</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Assistance for Parties (Scottish Parliament)"</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cranborne Money (House of Lords)"</span>,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Financial Assistance for Parties in NI Assembly"</span>,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Policy Development Grant"</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Short Money (House of Commons)"</span>,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Start Up Grant (Discontinued)"</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  ).not_()</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>).sort(<span class="st">"Value"</span>, descending<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>biggest_donors <span class="op">=</span> who_donations.select(</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"DonorName"</span>, <span class="st">"RegulatedEntityName"</span>, <span class="st">"Value"</span>]</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>).group_by([<span class="st">"DonorName"</span>, <span class="st">"RegulatedEntityName"</span>]).<span class="bu">sum</span>().sort(</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Value"</span>, descending<span class="op">=</span><span class="va">True</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>).pivot(</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  index<span class="op">=</span><span class="st">"DonorName"</span>,</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  on<span class="op">=</span><span class="st">"RegulatedEntityName"</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>).head(<span class="dv">10</span>)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>biggest_donors[[s.name <span class="cf">for</span> s <span class="kw">in</span> biggest_donors <span class="cf">if</span> <span class="kw">not</span> (s.null_count() <span class="op">==</span> biggest_donors.height)]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="31">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (10, 6)</small>
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">DonorName</th>
<th data-quarto-table-cell-role="th">Labour Party</th>
<th data-quarto-table-cell-role="th">Conservative and Unionist Party</th>
<th data-quarto-table-cell-role="th">Reform UK</th>
<th data-quarto-table-cell-role="th">Liberal Democrats</th>
<th data-quarto-table-cell-role="th">Co-operative Party</th>
</tr>
<tr class="odd">
<th>str</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"Unite the Union"</td>
<td>4.8891412e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"UNISON"</td>
<td>3.7628308e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>10000.0</td>
</tr>
<tr class="odd">
<td>"GMB"</td>
<td>3.6300552e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"National Conservative Draws So…</td>
<td>null</td>
<td>1.3818294e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Union of Shop Distributive and…</td>
<td>1.3506607e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Union of Shop, Distributive an…</td>
<td>1.2255292e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Lord John Sainsbury"</td>
<td>null</td>
<td>1.1257435e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Mr Christopher Harborne"</td>
<td>null</td>
<td>null</td>
<td>1.019e7</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Lord David Sainsbury"</td>
<td>5.071808e6</td>
<td>null</td>
<td>null</td>
<td>1.0125e7</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Communication Workers Union"</td>
<td>9.473529e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>So there’s a lot of money coming to Labour from the unions. This makes sense with the history of the Labour party.</p>
<p>There’s also the “National Conservative Draws Society”, which is a pretty sketchy way of <a href="https://www.theguardian.com/politics/2015/mar/13/conservative-party-given-nearly-500k-in-concealed-donations">concealing donations to political parties</a>.</p>
<p>Then, there are the private donors. Journalists sometimes make a noise about how the unions and the Labour party are tied together, but there are three guys there who have donated about £35 million between them.</p>
<p>I spotted something here. Christopher Harborne <a href="https://www.theguardian.com/politics/2023/jan/12/boris-johnson-given-1m-donation-by-former-brexit-party-backer">made the news</a> donating £1 million to Boris Johnson, which should have been recorded. There’s a “DonorId” field in the dataset. Maybe we’ll see the donation if we look at DonorId instead.</p>
<div id="c7905409" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>biggest_donors_by_id <span class="op">=</span> who_donations.select(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"DonorId"</span>, <span class="st">"RegulatedEntityName"</span>, <span class="st">"Value"</span>]</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>).group_by([<span class="st">"DonorId"</span>, <span class="st">"RegulatedEntityName"</span>]).<span class="bu">sum</span>().sort(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Value"</span>, descending<span class="op">=</span><span class="va">True</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>).pivot(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  index<span class="op">=</span><span class="st">"DonorId"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  on<span class="op">=</span><span class="st">"RegulatedEntityName"</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>).head(<span class="dv">10</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>biggest_donors_by_id[[s.name <span class="cf">for</span> s <span class="kw">in</span> biggest_donors_by_id <span class="cf">if</span> <span class="kw">not</span> (s.null_count() <span class="op">==</span> biggest_donors_by_id.height)]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="32">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (10, 6)</small>
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">DonorId</th>
<th data-quarto-table-cell-role="th">Labour Party</th>
<th data-quarto-table-cell-role="th">Conservative and Unionist Party</th>
<th data-quarto-table-cell-role="th">Reform UK</th>
<th data-quarto-table-cell-role="th">Liberal Democrats</th>
<th data-quarto-table-cell-role="th">Co-operative Party</th>
</tr>
<tr class="odd">
<th>i64</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>55387</td>
<td>2.5267816e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>34448</td>
<td>1.8958894e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>34447</td>
<td>1.5817447e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>34446</td>
<td>1.2251777e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>38732</td>
<td>null</td>
<td>1.0902435e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>45958</td>
<td>1.0799636e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>87126</td>
<td>null</td>
<td>null</td>
<td>1.019e7</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>74671</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>1.0125e7</td>
<td>null</td>
</tr>
<tr class="odd">
<td>34196</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>8.69897e6</td>
</tr>
<tr class="even">
<td>36362</td>
<td>null</td>
<td>7824772.5</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Still not there. If we look at all the Christophers Harborne in the data, we can see something I find very annoying.</p>
<div id="cabf7646" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pl.Config(tbl_rows<span class="op">=-</span><span class="dv">1</span>):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  display(who_donations.select(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"DonorId"</span>, <span class="st">"DonorName"</span>, <span class="st">"Value"</span>]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  ).<span class="bu">filter</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"DonorName"</span>).<span class="bu">str</span>.contains(<span class="st">"Harborne"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"DonorName"</span>).<span class="bu">str</span>.contains(<span class="st">"Christopher"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  ).group_by(</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"DonorName"</span>, <span class="st">"DonorId"</span>]</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  ).<span class="bu">sum</span>().sort(<span class="st">"Value"</span>, descending<span class="op">=</span><span class="va">True</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (12, 3)</small>
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">DonorName</th>
<th data-quarto-table-cell-role="th">DonorId</th>
<th data-quarto-table-cell-role="th">Value</th>
</tr>
<tr class="odd">
<th>str</th>
<th>i64</th>
<th>f32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"Mr Christopher Harborne"</td>
<td>87126</td>
<td>1.019e7</td>
</tr>
<tr class="even">
<td>" Christopher Charles Sherriff …</td>
<td>95060</td>
<td>1.515e6</td>
</tr>
<tr class="odd">
<td>"Mr Christopher C S Harborne"</td>
<td>84977</td>
<td>62500.0</td>
</tr>
<tr class="even">
<td>" Christopher C S Harborne"</td>
<td>84275</td>
<td>50000.0</td>
</tr>
<tr class="odd">
<td>" Christopher C Harborne"</td>
<td>8987</td>
<td>50000.0</td>
</tr>
<tr class="even">
<td>" Christopher C Harborne"</td>
<td>12223</td>
<td>50000.0</td>
</tr>
<tr class="odd">
<td>"Mr Christopher C Harborne"</td>
<td>6441</td>
<td>19994.0</td>
</tr>
<tr class="even">
<td>" Christopher C Harborne"</td>
<td>4527</td>
<td>19994.0</td>
</tr>
<tr class="odd">
<td>"Mr Christopher C Harborne"</td>
<td>997</td>
<td>10000.0</td>
</tr>
<tr class="even">
<td>"Mr Christopher C Harborne"</td>
<td>12780</td>
<td>8000.0</td>
</tr>
<tr class="odd">
<td>"Mr Christopher C Harborne"</td>
<td>18353</td>
<td>8000.0</td>
</tr>
<tr class="even">
<td>" Christopher C Harborne"</td>
<td>11283</td>
<td>400.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Mr Christopher Charles Sherriff Harborne has donated with a bunch of variations on his name. What’s the point of a DonorId that doesn’t track this?! A couple of these might be other Christophers, but I’m willing to bet a lot of these are the same guy. It might not be deliberate obfuscation, but it should be clearer who is the same person donating multiple times.</p>
<p>Anyway, let’s look at a breakdown of donor types by party:</p>
<div id="b1d39b45" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>who_donations.select(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"RegulatedEntityName"</span>, <span class="st">"DonorStatus"</span>, <span class="st">"Value"</span>]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"RegulatedEntityName"</span>).is_in(main_parties)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>).group_by(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"RegulatedEntityName"</span>, <span class="st">"DonorStatus"</span>]</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>).<span class="bu">sum</span>().plot.bar(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span>alt.X(<span class="st">"RegulatedEntityName"</span>, axis<span class="op">=</span>alt.Axis(labelAngle<span class="op">=-</span><span class="dv">45</span>)),</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="st">"Value"</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  color<span class="op">=</span><span class="st">"DonorStatus"</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="st">"container"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="34">

<style>
  #altair-viz-a663c64fffda4806adb9fbc3b58000d1.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-a663c64fffda4806adb9fbc3b58000d1.vega-embed details,
  #altair-viz-a663c64fffda4806adb9fbc3b58000d1.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-a663c64fffda4806adb9fbc3b58000d1"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-a663c64fffda4806adb9fbc3b58000d1") {
      outputDiv = document.getElementById("altair-viz-a663c64fffda4806adb9fbc3b58000d1");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "param_8_store"}, {"name": "source_0", "values": [{"DonorStatus": "Friendly Society", "RegulatedEntityName": "Labour Party", "Value": 412713.188, "Value_end": 324504886.0, "Value_start": 324092172.8125}, {"DonorStatus": "Individual", "RegulatedEntityName": "Reform UK", "Value": 12619000.0, "Value_end": 12619000.0, "Value_start": 0.0}, {"DonorStatus": "Other", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 156837.672, "Value_end": 31924609.3125, "Value_start": 31767771.640625}, {"DonorStatus": "Individual", "RegulatedEntityName": "Liberal Democrats", "Value": 66240764.0, "Value_end": 80695294.03125, "Value_start": 14454530.03125}, {"DonorStatus": "Friendly Society", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 91632.5, "Value_end": 361908371.0625, "Value_start": 361816738.5625}, {"DonorStatus": "Individual", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 327070624.0, "Value_end": 361816738.5625, "Value_start": 34746114.5625}, {"DonorStatus": "Limited Liability Partnership", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 2821505.25, "Value_end": 34746114.5625, "Value_start": 31924609.3125}, {"DonorStatus": "Public Fund", "RegulatedEntityName": "Labour Party", "Value": 2106572.25, "Value_end": 235122604.84375, "Value_start": 233016032.59375}, {"DonorStatus": "Trade Union", "RegulatedEntityName": "Labour Party", "Value": 220336608.0, "Value_end": 233016032.59375, "Value_start": 12679424.59375}, {"DonorStatus": "Company", "RegulatedEntityName": "Liberal Democrats", "Value": 26218762.0, "Value_end": 106924856.03125, "Value_start": 80706094.03125}, {"DonorStatus": "Unincorporated Association", "RegulatedEntityName": "Labour Party", "Value": 12531264.0, "Value_end": 12531264.0, "Value_start": 0.0}, {"DonorStatus": "Friendly Society", "RegulatedEntityName": "Liberal Democrats", "Value": 10800.0, "Value_end": 80706094.03125, "Value_start": 80695294.03125}, {"DonorStatus": "Public Fund", "RegulatedEntityName": "Liberal Democrats", "Value": 1049283.625, "Value_end": 13056204.28125, "Value_start": 12006920.65625}, {"DonorStatus": "Limited Liability Partnership", "RegulatedEntityName": "Liberal Democrats", "Value": 1398325.75, "Value_end": 14454530.03125, "Value_start": 13056204.28125}, {"DonorStatus": "Public Fund", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 220793.391, "Value_end": 31767771.640625, "Value_start": 31546978.25}, {"DonorStatus": "Trust", "RegulatedEntityName": "Labour Party", "Value": 148160.594, "Value_end": 12679424.59375, "Value_start": 12531264.0}, {"DonorStatus": "Company", "RegulatedEntityName": "Reform UK", "Value": 1584919.125, "Value_end": 14203919.125, "Value_start": 12619000.0}, {"DonorStatus": "Company", "RegulatedEntityName": "Labour Party", "Value": 19840136.0, "Value_end": 344345022.0, "Value_start": 324504886.0}, {"DonorStatus": "Trade Union", "RegulatedEntityName": "Liberal Democrats", "Value": 93441.406, "Value_end": 12006920.65625, "Value_start": 11913479.25}, {"DonorStatus": "Other", "RegulatedEntityName": "Labour Party", "Value": 487747.719, "Value_end": 235610352.5625, "Value_start": 235122604.84375}, {"DonorStatus": "Trust", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 1032284.25, "Value_end": 31546978.25, "Value_start": 30514694.0}, {"DonorStatus": "Individual", "RegulatedEntityName": "Labour Party", "Value": 85208272.0, "Value_end": 324092172.8125, "Value_start": 238883900.8125}, {"DonorStatus": "Trust", "RegulatedEntityName": "Liberal Democrats", "Value": 3327756.25, "Value_end": 11913479.25, "Value_start": 8585723.0}, {"DonorStatus": "Company", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 139762384.0, "Value_end": 501670755.0625, "Value_start": 361908371.0625}, {"DonorStatus": "Limited Liability Partnership", "RegulatedEntityName": "Labour Party", "Value": 3273548.25, "Value_end": 238883900.8125, "Value_start": 235610352.5625}, {"DonorStatus": "Unincorporated Association", "RegulatedEntityName": "Liberal Democrats", "Value": 8585723.0, "Value_end": 8585723.0, "Value_start": 0.0}, {"DonorStatus": "Unincorporated Association", "RegulatedEntityName": "Conservative and Unionist Party", "Value": 30514694.0, "Value_end": 30514694.0, "Value_start": 0.0}]}, {"name": "source_0_x_domain_RegulatedEntityName", "values": [{"RegulatedEntityName": "Labour Party"}, {"RegulatedEntityName": "Reform UK"}, {"RegulatedEntityName": "Conservative and Unionist Party"}, {"RegulatedEntityName": "Liberal Democrats"}]}, {"name": "source_0_color_domain_DonorStatus", "values": [{"DonorStatus": "Friendly Society"}, {"DonorStatus": "Individual"}, {"DonorStatus": "Other"}, {"DonorStatus": "Limited Liability Partnership"}, {"DonorStatus": "Public Fund"}, {"DonorStatus": "Trade Union"}, {"DonorStatus": "Company"}, {"DonorStatus": "Unincorporated Association"}, {"DonorStatus": "Trust"}]}], "signals": [{"name": "width", "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 300", "on": [{"events": "window:resize", "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 300"}]}, {"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_8", "update": "vlSelectionResolve(\"param_8_store\", \"union\")"}, {"name": "param_8_RegulatedEntityName", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_8_translate_delta"}, "update": "panLinear(param_8_translate_anchor.extent_x, -param_8_translate_delta.x / width)"}, {"events": {"signal": "param_8_zoom_delta"}, "update": "zoomLinear(domain(\"x\"), param_8_zoom_anchor.x, param_8_zoom_delta)"}]}, {"name": "param_8_Value", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_8_translate_delta"}, "update": "panLinear(param_8_translate_anchor.extent_y, param_8_translate_delta.y / height)"}, {"events": {"signal": "param_8_zoom_delta"}, "update": "zoomLinear(domain(\"y\"), param_8_zoom_anchor.y, param_8_zoom_delta)"}]}, {"name": "param_8_tuple", "on": [{"events": [{"signal": "param_8_RegulatedEntityName || param_8_Value"}], "update": "param_8_RegulatedEntityName && param_8_Value ? {unit: \"\", fields: param_8_tuple_fields, values: [param_8_RegulatedEntityName,param_8_Value]} : null"}]}, {"name": "param_8_tuple_fields", "value": [{"field": "RegulatedEntityName", "channel": "x", "type": "E"}, {"field": "Value", "channel": "y", "type": "R"}]}, {"name": "param_8_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: domain(\"x\"), extent_y: domain(\"y\")}"}]}, {"name": "param_8_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}], "update": "{x: param_8_translate_anchor.x - x(unit), y: param_8_translate_anchor.y - y(unit)}"}]}, {"name": "param_8_zoom_anchor", "on": [{"events": [{"source": "scope", "consume": true, "type": "wheel"}], "update": "{x: invert(\"x\", x(unit)), y: invert(\"y\", y(unit))}"}]}, {"name": "param_8_zoom_delta", "on": [{"events": [{"source": "scope", "type": "wheel", "consume": true}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_8_modify", "on": [{"events": {"signal": "param_8_tuple"}, "update": "modify(\"param_8_store\", param_8_tuple, true)"}]}], "marks": [{"type": "rect", "name": "marks", "from": {"data": "source_0"}, "encode": {"update": {"width": {"signal": "max(0.25, bandwidth('x'))"}, "tooltip": {"signal": "{\"RegulatedEntityName\": isValid(datum[\"RegulatedEntityName\"]) ? datum[\"RegulatedEntityName\"] : \"\"+datum[\"RegulatedEntityName\"], \"Value\": format(datum[\"Value\"], \"\"), \"DonorStatus\": isValid(datum[\"DonorStatus\"]) ? datum[\"DonorStatus\"] : \"\"+datum[\"DonorStatus\"]}"}, "fill": {"field": "DonorStatus", "scale": "color"}, "x": {"field": "RegulatedEntityName", "scale": "x"}, "y": {"field": "Value_end", "scale": "y"}, "y2": {"field": "Value_start", "scale": "y"}}}, "clip": true, "interactive": true, "style": ["bar"]}], "scales": [{"name": "x", "type": "band", "domain": {"data": "source_0_x_domain_RegulatedEntityName", "field": "RegulatedEntityName", "sort": true}, "range": [0, {"signal": "width"}], "paddingOuter": 0.05, "paddingInner": 0.1}, {"name": "y", "type": "linear", "domain": {"data": "source_0", "fields": ["Value_start", "Value_end"]}, "range": [{"signal": "height"}, 0], "zero": true, "domainRaw": {"signal": "param_8[\"Value\"]"}, "nice": true}, {"name": "color", "type": "ordinal", "domain": {"data": "source_0_color_domain_DonorStatus", "field": "DonorStatus", "sort": true}, "range": "category"}], "axes": [{"scale": "y", "aria": false, "zindex": 0, "orient": "left", "minExtent": 0, "maxExtent": 0, "domain": false, "grid": true, "tickCount": {"signal": "ceil(height/40)"}, "gridScale": "x", "labels": false, "ticks": false}, {"scale": "x", "title": "RegulatedEntityName", "labelAlign": "right", "grid": false, "labelBaseline": "top", "zindex": 0, "orient": "bottom", "labelAngle": 315}, {"scale": "y", "labelOverlap": true, "grid": false, "title": "Value", "orient": "left", "tickCount": {"signal": "ceil(height/40)"}, "zindex": 0}], "autosize": {"type": "fit-x", "contains": "padding"}, "legends": [{"fill": "color", "symbolType": "square", "title": "DonorStatus"}], "padding": 5, "style": "cell", "background": "white", "height": 300}, {"mode": "vega"});
</script>
</div>
</div>
<p>It’s quite astonishing how much of their money Labour gets from the unions! If they didn’t get their union money, their donations would be pretty similar to the Liberal Democrats.</p>
<p>If you look at the top 20 individual donors, you can see another instance of someone donating twice with different names. You can also see that political donations at the top haven’t even heard of gender equality.</p>
<div id="ebad27d6" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pl.Config(tbl_rows<span class="op">=</span><span class="dv">20</span>):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  biggest_donors_individual <span class="op">=</span> who_donations.select(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"DonorName"</span>, <span class="st">"DonorStatus"</span>, <span class="st">"RegulatedEntityName"</span>, <span class="st">"Value"</span>]</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  ).<span class="bu">filter</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"DonorStatus"</span>) <span class="op">==</span> <span class="st">"Individual"</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  ).select(</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    pl.exclude(<span class="st">"DonorStatus"</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  ).group_by([<span class="st">"DonorName"</span>, <span class="st">"RegulatedEntityName"</span>]).<span class="bu">sum</span>().sort(</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Value"</span>, descending<span class="op">=</span><span class="va">True</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  ).pivot(</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">"DonorName"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    on<span class="op">=</span><span class="st">"RegulatedEntityName"</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  ).head(<span class="dv">20</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  display(biggest_donors_individual[[s.name <span class="cf">for</span> s <span class="kw">in</span> biggest_donors_individual <span class="cf">if</span> <span class="kw">not</span> (s.null_count() <span class="op">==</span> biggest_donors_individual.height)]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (20, 8)</small>
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">DonorName</th>
<th data-quarto-table-cell-role="th">Conservative and Unionist Party</th>
<th data-quarto-table-cell-role="th">Reform UK</th>
<th data-quarto-table-cell-role="th">Liberal Democrats</th>
<th data-quarto-table-cell-role="th">Labour Party</th>
<th data-quarto-table-cell-role="th">The Reclaim Party</th>
<th data-quarto-table-cell-role="th">Sinn Féin</th>
<th data-quarto-table-cell-role="th">Co-operative Party</th>
</tr>
<tr class="odd">
<th>str</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
<th>f32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"Lord John Sainsbury"</td>
<td>1.1257435e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Mr Christopher Harborne"</td>
<td>null</td>
<td>1.019e7</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Lord David Sainsbury"</td>
<td>null</td>
<td>null</td>
<td>1.0125e7</td>
<td>5.071808e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Lord David Sainsbury of Turvil…</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>9.316e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Sir Michael L Davis"</td>
<td>5524949.5</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>" Graham H Edwards"</td>
<td>5.450804e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>" Mohamed Younes Mansour Lotfy …</td>
<td>5e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Sir Paul Getty"</td>
<td>5e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>" Francis X Hester"</td>
<td>5e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Lord Michael S Farmer"</td>
<td>4.99453e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Mr Gary Lubner"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>4.6695e6</td>
<td>null</td>
<td>null</td>
<td>50000.0</td>
</tr>
<tr class="even">
<td>"Mr JEREMY HOSKING"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>3.623949e6</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Mr John S Wheeler"</td>
<td>3.563301e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Mr William E Hampton"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>3.462866e6</td>
<td>null</td>
</tr>
<tr class="odd">
<td>" Nigel Doughty"</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>3.305201e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Lord James Roger Lupton"</td>
<td>3.2999e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Mr John E Gore"</td>
<td>3.241499e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>" Lakshmi Mittal"</td>
<td>75000.0</td>
<td>null</td>
<td>null</td>
<td>3.125e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="odd">
<td>"Mr John Griffin"</td>
<td>3.1085e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
<tr class="even">
<td>"Mr Malcolm S Healey"</td>
<td>3.01e6</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="b1e4846a" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>labour_donations <span class="op">=</span> [np.array(donations.<span class="bu">filter</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"RegulatedEntityName"</span>) <span class="op">==</span> <span class="st">"Labour Party"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>).with_columns(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"AcceptedDate"</span>).dt.year().alias(<span class="st">"Year"</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"Year"</span>) <span class="op">==</span> year</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>).select(</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Value"</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>)).reshape(<span class="op">-</span><span class="dv">1</span>) <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>, <span class="dv">2024</span>)]</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>con_donations <span class="op">=</span> [np.array(donations.<span class="bu">filter</span>(</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"RegulatedEntityName"</span>) <span class="op">==</span> <span class="st">"Conservative and Unionist Party"</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>).with_columns(</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"AcceptedDate"</span>).dt.year().alias(<span class="st">"Year"</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"Year"</span>) <span class="op">==</span> year</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>).select(</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Value"</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>)).reshape(<span class="op">-</span><span class="dv">1</span>) <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>, <span class="dv">2024</span>)]</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>lib_dem_donations <span class="op">=</span> [np.array(donations.<span class="bu">filter</span>(</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"RegulatedEntityName"</span>) <span class="op">==</span> <span class="st">"Liberal Democrats"</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>).with_columns(</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"AcceptedDate"</span>).dt.year().alias(<span class="st">"Year"</span>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  pl.col(<span class="st">"Year"</span>) <span class="op">==</span> year</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>).select(</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Value"</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>)).reshape(<span class="op">-</span><span class="dv">1</span>) <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>, <span class="dv">2024</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I don’t really have any conclusions here. I hadn’t realised quite how much money was coming in to political parties. This isn’t everything; if you donate <a href="https://www.electoralcommission.org.uk/political-party-donations-and-loans-great-britain/which-donations-and-loans-do-you-need-report/reporting-donations-and-loans-examples">below certain thresholds</a> you don’t have to report anything. Given the eye-watering sums at the top though, you do get a good sense of how much money everyone is getting.</p>
<p>I also hadn’t realised how dependent the Labour party is on unions. Another time, I might look into why the median value of their donations has increased recently, but this is already long enough.</p>
</section>
<section id="bonus" class="level2">
<h2 class="anchored" data-anchor-id="bonus">Bonus</h2>
<p>I love a violin plot, or a box plot to compare distributions. However, this time, the values are so skewed that when I tried it I got this:</p>
<div id="abd4a3d6" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>lab_violins <span class="op">=</span> ax.violinplot(labour_donations, [x<span class="op">-</span><span class="fl">0.2</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>,<span class="dv">2024</span>)], widths<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>con_violins <span class="op">=</span> ax.violinplot(con_donations, [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>,<span class="dv">2024</span>)], widths<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>lib_dem_violins <span class="op">=</span> ax.violinplot(lib_dem_donations, [x<span class="op">+</span><span class="fl">0.2</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>,<span class="dv">2024</span>)], widths<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pc <span class="kw">in</span> lab_violins[<span class="st">'bodies'</span>]:</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  pc.set_facecolor(party_colours[<span class="dv">0</span>])</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pc <span class="kw">in</span> con_violins[<span class="st">'bodies'</span>]:</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  pc.set_facecolor(party_colours[<span class="dv">1</span>])</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pc <span class="kw">in</span> lib_dem_violins[<span class="st">'bodies'</span>]:</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  pc.set_facecolor(party_colours[<span class="dv">2</span>])</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Accepted Year"</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Value (£)"</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">'top'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">'right'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="uk_donations_files/figure-html/cell-19-output-1.png" width="589" height="443" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The maximum values are so high that you can’t even see the distribution. In any case, they’re kind of boring, and just showing the median and interquartile ranges is more informative.</p>
<div id="b202ce79" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>lab_violins <span class="op">=</span> ax.violinplot(labour_donations, [x<span class="op">-</span><span class="fl">0.2</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>,<span class="dv">2024</span>)], widths<span class="op">=</span><span class="fl">0.5</span>, showextrema<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>con_violins <span class="op">=</span> ax.violinplot(con_donations, [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>,<span class="dv">2024</span>)], widths<span class="op">=</span><span class="fl">0.5</span>, showextrema<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>lib_dem_violins <span class="op">=</span> ax.violinplot(lib_dem_donations, [x<span class="op">+</span><span class="fl">0.2</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2001</span>,<span class="dv">2024</span>)], widths<span class="op">=</span><span class="fl">0.5</span>, showextrema<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pc <span class="kw">in</span> lab_violins[<span class="st">'bodies'</span>]:</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  pc.set_facecolor(party_colours[<span class="dv">0</span>])</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pc <span class="kw">in</span> con_violins[<span class="st">'bodies'</span>]:</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  pc.set_facecolor(party_colours[<span class="dv">1</span>])</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pc <span class="kw">in</span> lib_dem_violins[<span class="st">'bodies'</span>]:</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  pc.set_facecolor(party_colours[<span class="dv">2</span>])</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Accepted Year"</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Value (£)"</span>)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>ax.set_ylim((<span class="dv">0</span>,<span class="fl">2.5e5</span>))</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">'top'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">'right'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="uk_donations_files/figure-html/cell-20-output-1.png" width="619" height="434" class="figure-img"></p>
</figure>
</div>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>breaking the illusion of me doing this “as live”, there’s a bit on how hilariously skewed the distribution is below<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>